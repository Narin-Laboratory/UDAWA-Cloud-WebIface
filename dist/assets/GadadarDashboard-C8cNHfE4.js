import{g as ye,a as Se,r as g,u as yt,b as St,c as de,s as F,j as a,d as N,e as we,B as Mt,f as Dt,h as Te,i as wt,P as kt,F as it,k as $t,l as re,M as At,m as It,n as te,T as U,o as zt,p as $e,q as Nt,t as Ft,v as at,w as Ke,x as rt,y as ct,z as Ye,A as Bt,C as xe,D as Je,E as Ct,G as Et,R as jt,H as lt,I as ve,J as dt,K as ut,S as pt,L as mt,N as st,O as ce,Q as Wt,U as Ht,V as Vt,W as Ot,X as Ut}from"./index-CIZpIcYM.js";import{C as qe,a as Xe,D as ht,S as Pe,R as Kt,L as Yt,b as qt,X as Xt,Y as Gt,T as Jt,c as Qt,d as Zt,e as eo,f as to,g as oo}from"./TimeseriesVisualizer-CPEKX3dO.js";function ao(e){return ye("PrivateSwitchBase",e)}Se("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const ro=e=>{const{classes:t,checked:r,disabled:o,edge:d}=e,m={root:["root",r&&"checked",o&&"disabled",d&&`edge${N(d)}`],input:["input"]};return we(m,ao,t)},so=F(Mt,{name:"MuiSwitchBase"})({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:e,ownerState:t})=>e==="start"&&t.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:e,ownerState:t})=>e==="end"&&t.size!=="small",style:{marginRight:-12}}]}),no=F("input",{name:"MuiSwitchBase",shouldForwardProp:Dt})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),lo=g.forwardRef(function(t,r){const{autoFocus:o,checked:d,checkedIcon:m,defaultChecked:b,disabled:s,disableFocusRipple:u=!1,edge:h=!1,icon:i,id:M,inputProps:k,inputRef:A,name:B,onBlur:w,onChange:v,onFocus:H,readOnly:ee,required:j=!1,tabIndex:I,type:E,value:c,slots:p={},slotProps:_={},...V}=t,[R,G]=yt({controlled:d,default:!!b,name:"SwitchBase",state:"checked"}),D=St(),$=z=>{H&&H(z),D&&D.onFocus&&D.onFocus(z)},C=z=>{w&&w(z),D&&D.onBlur&&D.onBlur(z)},Y=z=>{if(z.nativeEvent.defaultPrevented)return;const q=z.target.checked;G(q),v&&v(z,q)};let L=s;D&&typeof L>"u"&&(L=D.disabled);const pe=E==="checkbox"||E==="radio",P={...t,checked:R,disabled:L,disableFocusRipple:u,edge:h},oe=ro(P),ie={slots:p,slotProps:{input:k,..._}},[T,J]=de("root",{ref:r,elementType:so,className:oe.root,shouldForwardComponentProp:!0,externalForwardedProps:{...ie,component:"span",...V},getSlotProps:z=>({...z,onFocus:q=>{z.onFocus?.(q),$(q)},onBlur:q=>{z.onBlur?.(q),C(q)}}),ownerState:P,additionalProps:{centerRipple:!0,focusRipple:!u,disabled:L,role:void 0,tabIndex:null}}),[ke,Ce]=de("input",{ref:A,elementType:no,className:oe.input,externalForwardedProps:ie,getSlotProps:z=>({...z,onChange:q=>{z.onChange?.(q),Y(q)}}),ownerState:P,additionalProps:{autoFocus:o,checked:d,defaultChecked:b,disabled:L,id:pe?M:void 0,name:B,readOnly:ee,required:j,tabIndex:I,type:E,...E==="checkbox"&&c===void 0?{}:{value:c}}});return a.jsxs(T,{...J,children:[a.jsx(ke,{...Ce}),R?m:i]})});function io(e){return ye("MuiDialog",e)}const nt=Se("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),Pt=g.createContext({}),co=F(It,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),uo=e=>{const{classes:t,scroll:r,maxWidth:o,fullWidth:d,fullScreen:m}=e,b={root:["root"],container:["container",`scroll${N(r)}`],paper:["paper",`paperScroll${N(r)}`,`paperWidth${N(String(o))}`,d&&"paperFullWidth",m&&"paperFullScreen"]};return we(b,io,t)},po=F(At,{name:"MuiDialog",slot:"Root"})({"@media print":{position:"absolute !important"}}),mo=F("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.container,t[`scroll${N(r.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),ho=F(kt,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.paper,t[`scrollPaper${N(r.scroll)}`],t[`paperWidth${N(String(r.maxWidth))}`],r.fullWidth&&t.paperFullWidth,r.fullScreen&&t.paperFullScreen]}})(te(({theme:e})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:t})=>!t.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:e.breakpoints.unit==="px"?Math.max(e.breakpoints.values.xs,444):`max(${e.breakpoints.values.xs}${e.breakpoints.unit}, 444px)`,[`&.${nt.paperScrollBody}`]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(e.breakpoints.values).filter(t=>t!=="xs").map(t=>({props:{maxWidth:t},style:{maxWidth:`${e.breakpoints.values[t]}${e.breakpoints.unit}`,[`&.${nt.paperScrollBody}`]:{[e.breakpoints.down(e.breakpoints.values[t]+64)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:t})=>t.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:t})=>t.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${nt.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),bo=g.forwardRef(function(t,r){const o=Te({props:t,name:"MuiDialog"}),d=wt(),m={enter:d.transitions.duration.enteringScreen,exit:d.transitions.duration.leavingScreen},{"aria-describedby":b,"aria-labelledby":s,"aria-modal":u=!0,BackdropComponent:h,BackdropProps:i,children:M,className:k,disableEscapeKeyDown:A=!1,fullScreen:B=!1,fullWidth:w=!1,maxWidth:v="sm",onClick:H,onClose:ee,open:j,PaperComponent:I=kt,PaperProps:E={},scroll:c="paper",slots:p={},slotProps:_={},TransitionComponent:V=it,transitionDuration:R=m,TransitionProps:G,...D}=o,$={...o,disableEscapeKeyDown:A,fullScreen:B,fullWidth:w,maxWidth:v,scroll:c},C=uo($),Y=g.useRef(),L=W=>{Y.current=W.target===W.currentTarget},pe=W=>{H&&H(W),Y.current&&(Y.current=null,ee&&ee(W,"backdropClick"))},P=$t(s),oe=g.useMemo(()=>({titleId:P}),[P]),ie={transition:V,...p},T={transition:G,paper:E,backdrop:i,..._},J={slots:ie,slotProps:T},[ke,Ce]=de("root",{elementType:po,shouldForwardComponentProp:!0,externalForwardedProps:J,ownerState:$,className:re(C.root,k),ref:r}),[z,q]=de("backdrop",{elementType:co,shouldForwardComponentProp:!0,externalForwardedProps:J,ownerState:$}),[_e,me]=de("paper",{elementType:ho,shouldForwardComponentProp:!0,externalForwardedProps:J,ownerState:$,className:re(C.paper,E.className)}),[he,be]=de("container",{elementType:mo,externalForwardedProps:J,ownerState:$,className:C.container}),[fe,se]=de("transition",{elementType:it,externalForwardedProps:J,ownerState:$,additionalProps:{appear:!0,in:j,timeout:R,role:"presentation"}});return a.jsx(ke,{closeAfterTransition:!0,slots:{backdrop:z},slotProps:{backdrop:{transitionDuration:R,as:h,...q}},disableEscapeKeyDown:A,onClose:ee,open:j,onClick:pe,...Ce,...D,children:a.jsx(fe,{...se,children:a.jsx(he,{onMouseDown:L,...be,children:a.jsx(_e,{as:I,elevation:24,role:"dialog","aria-describedby":b,"aria-labelledby":P,"aria-modal":u,...me,children:a.jsx(Pt.Provider,{value:oe,children:M})})})})})});function fo(e){return ye("MuiDialogActions",e)}Se("MuiDialogActions",["root","spacing"]);const go=e=>{const{classes:t,disableSpacing:r}=e;return we({root:["root",!r&&"spacing"]},fo,t)},xo=F("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.disableSpacing&&t.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:({ownerState:e})=>!e.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),vo=g.forwardRef(function(t,r){const o=Te({props:t,name:"MuiDialogActions"}),{className:d,disableSpacing:m=!1,...b}=o,s={...o,disableSpacing:m},u=go(s);return a.jsx(xo,{className:re(u.root,d),ownerState:s,ref:r,...b})});function yo(e){return ye("MuiDialogContent",e)}Se("MuiDialogContent",["root","dividers"]);function So(e){return ye("MuiDialogTitle",e)}const wo=Se("MuiDialogTitle",["root"]),ko=e=>{const{classes:t,dividers:r}=e;return we({root:["root",r&&"dividers"]},yo,t)},Co=F("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.dividers&&t.dividers]}})(te(({theme:e})=>({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:({ownerState:t})=>t.dividers,style:{padding:"16px 24px",borderTop:`1px solid ${(e.vars||e).palette.divider}`,borderBottom:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>!t.dividers,style:{[`.${wo.root} + &`]:{paddingTop:0}}}]}))),jo=g.forwardRef(function(t,r){const o=Te({props:t,name:"MuiDialogContent"}),{className:d,dividers:m=!1,...b}=o,s={...o,dividers:m},u=ko(s);return a.jsx(Co,{className:re(u.root,d),ownerState:s,ref:r,...b})}),Po=e=>{const{classes:t}=e;return we({root:["root"]},So,t)},To=F(U,{name:"MuiDialogTitle",slot:"Root"})({padding:"16px 24px",flex:"0 0 auto"}),_o=g.forwardRef(function(t,r){const o=Te({props:t,name:"MuiDialogTitle"}),{className:d,id:m,...b}=o,s=o,u=Po(s),{titleId:h=m}=g.useContext(Pt);return a.jsx(To,{component:"h2",className:re(u.root,d),ownerState:s,ref:r,variant:"h6",id:m??h,...b})});function Ro(e){return ye("MuiFormControlLabel",e)}const Ae=Se("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),Lo=e=>{const{classes:t,disabled:r,labelPlacement:o,error:d,required:m}=e,b={root:["root",r&&"disabled",`labelPlacement${N(o)}`,d&&"error",m&&"required"],label:["label",r&&"disabled"],asterisk:["asterisk",d&&"error"]};return we(b,Ro,t)},Mo=F("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`& .${Ae.label}`]:t.label},t.root,t[`labelPlacement${N(r.labelPlacement)}`]]}})(te(({theme:e})=>({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${Ae.disabled}`]:{cursor:"default"},[`& .${Ae.label}`]:{[`&.${Ae.disabled}`]:{color:(e.vars||e).palette.text.disabled}},variants:[{props:{labelPlacement:"start"},style:{flexDirection:"row-reverse",marginRight:-11}},{props:{labelPlacement:"top"},style:{flexDirection:"column-reverse"}},{props:{labelPlacement:"bottom"},style:{flexDirection:"column"}},{props:({labelPlacement:t})=>t==="start"||t==="top"||t==="bottom",style:{marginLeft:16}}]}))),Do=F("span",{name:"MuiFormControlLabel",slot:"Asterisk"})(te(({theme:e})=>({[`&.${Ae.error}`]:{color:(e.vars||e).palette.error.main}}))),$o=g.forwardRef(function(t,r){const o=Te({props:t,name:"MuiFormControlLabel"}),{checked:d,className:m,componentsProps:b={},control:s,disabled:u,disableTypography:h,inputRef:i,label:M,labelPlacement:k="end",name:A,onChange:B,required:w,slots:v={},slotProps:H={},value:ee,...j}=o,I=St(),E=u??s.props.disabled??I?.disabled,c=w??s.props.required,p={disabled:E,required:c};["checked","name","onChange","value","inputRef"].forEach(Y=>{typeof s.props[Y]>"u"&&typeof o[Y]<"u"&&(p[Y]=o[Y])});const _=zt({props:o,muiFormControl:I,states:["error"]}),V={...o,disabled:E,labelPlacement:k,required:c,error:_.error},R=Lo(V),G={slots:v,slotProps:{...b,...H}},[D,$]=de("typography",{elementType:U,externalForwardedProps:G,ownerState:V});let C=M;return C!=null&&C.type!==U&&!h&&(C=a.jsx(D,{component:"span",...$,className:re(R.label,$?.className),children:C})),a.jsxs(Mo,{className:re(R.root,m),ownerState:V,ref:r,...j,children:[g.cloneElement(s,p),c?a.jsxs("div",{children:[C,a.jsxs(Do,{ownerState:V,"aria-hidden":!0,className:R.asterisk,children:["â€‰","*"]})]}):C]})}),Ao={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function Io(e,t,r=(o,d)=>o===d){return e.length===t.length&&e.every((o,d)=>r(o,t[d]))}const zo=2;function Le(e,t,r,o,d){return r===1?Math.min(e+t,d):Math.max(e-t,o)}function Tt(e,t){return e-t}function bt(e,t){const{index:r}=e.reduce((o,d,m)=>{const b=Math.abs(t-d);return o===null||b<o.distance||b===o.distance?{distance:b,index:m}:o},null)??{};return r}function He(e,t){if(t.current!==void 0&&e.changedTouches){const r=e;for(let o=0;o<r.changedTouches.length;o+=1){const d=r.changedTouches[o];if(d.identifier===t.current)return{x:d.clientX,y:d.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function Ge(e,t,r){return(e-t)*100/(r-t)}function No(e,t,r){return(r-t)*e+t}function Fo(e){if(Math.abs(e)<1){const r=e.toExponential().split("e-"),o=r[0].split(".")[1];return(o?o.length:0)+parseInt(r[1],10)}const t=e.toString().split(".")[1];return t?t.length:0}function Bo(e,t,r){const o=Math.round((e-r)/t)*t+r;return Number(o.toFixed(Fo(t)))}function ft({values:e,newValue:t,index:r}){const o=e.slice();return o[r]=t,o.sort(Tt)}function Ve({sliderRef:e,activeIndex:t,setActive:r}){const o=Ke(e.current);(!e.current?.contains(o.activeElement)||Number(o?.activeElement?.getAttribute("data-index"))!==t)&&e.current?.querySelector(`[type="range"][data-index="${t}"]`).focus(),r&&r(t)}function Oe(e,t){return typeof e=="number"&&typeof t=="number"?e===t:typeof e=="object"&&typeof t=="object"?Io(e,t):!1}const Eo={horizontal:{offset:e=>({left:`${e}%`}),leap:e=>({width:`${e}%`})},"horizontal-reverse":{offset:e=>({right:`${e}%`}),leap:e=>({width:`${e}%`})},vertical:{offset:e=>({bottom:`${e}%`}),leap:e=>({height:`${e}%`})}},Wo=e=>e;let Ue;function gt(){return Ue===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?Ue=CSS.supports("touch-action","none"):Ue=!0),Ue}function Ho(e){const{"aria-labelledby":t,defaultValue:r,disabled:o=!1,disableSwap:d=!1,isRtl:m=!1,marks:b=!1,max:s=100,min:u=0,name:h,onChange:i,onChangeCommitted:M,orientation:k="horizontal",rootRef:A,scale:B=Wo,step:w=1,shiftStep:v=10,tabIndex:H,value:ee}=e,j=g.useRef(void 0),[I,E]=g.useState(-1),[c,p]=g.useState(-1),[_,V]=g.useState(!1),R=g.useRef(0),G=g.useRef(null),[D,$]=yt({controlled:ee,default:r??u,name:"Slider"}),C=i&&((l,n,f)=>{const S=l.nativeEvent||l,y=new S.constructor(S.type,S);Object.defineProperty(y,"target",{writable:!0,value:{value:n,name:h}}),G.current=n,i(y,n,f)}),Y=Array.isArray(D);let L=Y?D.slice().sort(Tt):[D];L=L.map(l=>l==null?u:$e(l,u,s));const pe=b===!0&&w!==null?[...Array(Math.floor((s-u)/w)+1)].map((l,n)=>({value:u+w*n})):b||[],P=pe.map(l=>l.value),[oe,ie]=g.useState(-1),T=g.useRef(null),J=Nt(A,T),ke=l=>n=>{const f=Number(n.currentTarget.getAttribute("data-index"));ct(n.target)&&ie(f),p(f),l?.onFocus?.(n)},Ce=l=>n=>{ct(n.target)||ie(-1),p(-1),l?.onBlur?.(n)},z=(l,n)=>{const f=Number(l.currentTarget.getAttribute("data-index")),S=L[f],y=P.indexOf(S);let x=n;if(pe&&w==null){const ae=P[P.length-1];x>=ae?x=ae:x<=P[0]?x=P[0]:x=x<S?P[y-1]:P[y+1]}if(x=$e(x,u,s),Y){d&&(x=$e(x,L[f-1]||-1/0,L[f+1]||1/0));const ae=x;x=ft({values:L,newValue:x,index:f});let ne=f;d||(ne=x.indexOf(ae)),Ve({sliderRef:T,activeIndex:ne})}$(x),ie(f),C&&!Oe(x,D)&&C(l,x,f),M&&M(l,G.current??x)},q=l=>n=>{if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","PageUp","PageDown","Home","End"].includes(n.key)){n.preventDefault();const f=Number(n.currentTarget.getAttribute("data-index")),S=L[f];let y=null;if(w!=null){const x=n.shiftKey?v:w;switch(n.key){case"ArrowUp":y=Le(S,x,1,u,s);break;case"ArrowRight":y=Le(S,x,m?-1:1,u,s);break;case"ArrowDown":y=Le(S,x,-1,u,s);break;case"ArrowLeft":y=Le(S,x,m?1:-1,u,s);break;case"PageUp":y=Le(S,v,1,u,s);break;case"PageDown":y=Le(S,v,-1,u,s);break;case"Home":y=u;break;case"End":y=s;break}}else if(pe){const x=P[P.length-1],ae=P.indexOf(S),ne=[m?"ArrowRight":"ArrowLeft","ArrowDown","PageDown","Home"],K=[m?"ArrowLeft":"ArrowRight","ArrowUp","PageUp","End"];ne.includes(n.key)?ae===0?y=P[0]:y=P[ae-1]:K.includes(n.key)&&(ae===P.length-1?y=x:y=P[ae+1])}y!=null&&z(n,y)}l?.onKeyDown?.(n)};Ft(()=>{o&&T.current.contains(document.activeElement)&&document.activeElement?.blur()},[o]),o&&I!==-1&&E(-1),o&&oe!==-1&&ie(-1);const _e=l=>n=>{l.onChange?.(n),z(n,n.target.valueAsNumber)},me=g.useRef(void 0);let he=k;m&&k==="horizontal"&&(he+="-reverse");const be=({finger:l,move:n=!1})=>{const{current:f}=T,{width:S,height:y,bottom:x,left:ae}=f.getBoundingClientRect();let ne;he.startsWith("vertical")?ne=(x-l.y)/y:ne=(l.x-ae)/S,he.includes("-reverse")&&(ne=1-ne);let K;if(K=No(ne,u,s),w)K=Bo(K,w,u);else{const De=bt(P,K);K=P[De]}K=$e(K,u,s);let ue=0;if(Y){n?ue=me.current:ue=bt(L,K),d&&(K=$e(K,L[ue-1]||-1/0,L[ue+1]||1/0));const De=K;K=ft({values:L,newValue:K,index:ue}),d&&n||(ue=K.indexOf(De),me.current=ue)}return{newValue:K,activeIndex:ue}},fe=at(l=>{const n=He(l,j);if(!n)return;if(R.current+=1,l.type==="mousemove"&&l.buttons===0){se(l);return}const{newValue:f,activeIndex:S}=be({finger:n,move:!0});Ve({sliderRef:T,activeIndex:S,setActive:E}),$(f),!_&&R.current>zo&&V(!0),C&&!Oe(f,D)&&C(l,f,S)}),se=at(l=>{const n=He(l,j);if(V(!1),!n)return;const{newValue:f}=be({finger:n,move:!0});E(-1),l.type==="touchend"&&p(-1),M&&M(l,G.current??f),j.current=void 0,je()}),W=at(l=>{if(o)return;gt()||l.preventDefault();const n=l.changedTouches[0];n!=null&&(j.current=n.identifier);const f=He(l,j);if(f!==!1){const{newValue:y,activeIndex:x}=be({finger:f});Ve({sliderRef:T,activeIndex:x,setActive:E}),$(y),C&&!Oe(y,D)&&C(l,y,x)}R.current=0;const S=Ke(T.current);S.addEventListener("touchmove",fe,{passive:!0}),S.addEventListener("touchend",se,{passive:!0})}),je=g.useCallback(()=>{const l=Ke(T.current);l.removeEventListener("mousemove",fe),l.removeEventListener("mouseup",se),l.removeEventListener("touchmove",fe),l.removeEventListener("touchend",se)},[se,fe]);g.useEffect(()=>{const{current:l}=T;return l.addEventListener("touchstart",W,{passive:gt()}),()=>{l.removeEventListener("touchstart",W),je()}},[je,W]),g.useEffect(()=>{o&&je()},[o,je]);const Qe=l=>n=>{if(l.onMouseDown?.(n),o||n.defaultPrevented||n.button!==0)return;n.preventDefault();const f=He(n,j);if(f!==!1){const{newValue:y,activeIndex:x}=be({finger:f});Ve({sliderRef:T,activeIndex:x,setActive:E}),$(y),C&&!Oe(y,D)&&C(n,y,x)}R.current=0;const S=Ke(T.current);S.addEventListener("mousemove",fe,{passive:!0}),S.addEventListener("mouseup",se)},Ie=Ge(Y?L[0]:u,u,s),Q=Ge(L[L.length-1],u,s)-Ie,Me=(l={})=>{const n=rt(l),f={onMouseDown:Qe(n||{})},S={...n,...f};return{...l,ref:J,...S}},ze=l=>n=>{l.onMouseOver?.(n);const f=Number(n.currentTarget.getAttribute("data-index"));p(f)},Ne=l=>n=>{l.onMouseLeave?.(n),p(-1)},Fe=(l={})=>{const n=rt(l),f={onMouseOver:ze(n||{}),onMouseLeave:Ne(n||{})};return{...l,...n,...f}},Be=l=>({pointerEvents:I!==-1&&I!==l?"none":void 0});let Re;return k==="vertical"&&(Re=m?"vertical-rl":"vertical-lr"),{active:I,axis:he,axisProps:Eo,dragging:_,focusedThumbIndex:oe,getHiddenInputProps:(l={})=>{const n=rt(l),f={onChange:_e(n||{}),onFocus:ke(n||{}),onBlur:Ce(n||{}),onKeyDown:q(n||{})},S={...n,...f};return{tabIndex:H,"aria-labelledby":t,"aria-orientation":k,"aria-valuemax":B(s),"aria-valuemin":B(u),name:h,type:"range",min:e.min,max:e.max,step:e.step===null&&e.marks?"any":e.step??void 0,disabled:o,...l,...S,style:{...Ao,direction:m?"rtl":"ltr",width:"100%",height:"100%",writingMode:Re}}},getRootProps:Me,getThumbProps:Fe,marks:pe,open:c,range:Y,rootRef:J,trackLeap:Q,trackOffset:Ie,values:L,getThumbStyle:Be}}const Vo=e=>!e||!Ye(e);function Oo(e){return ye("MuiSlider",e)}const le=Se("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]),Uo=e=>{const{open:t}=e;return{offset:re(t&&le.valueLabelOpen),circle:le.valueLabelCircle,label:le.valueLabelLabel}};function Ko(e){const{children:t,className:r,value:o}=e,d=Uo(e);return t?g.cloneElement(t,{className:t.props.className},a.jsxs(g.Fragment,{children:[t.props.children,a.jsx("span",{className:re(d.offset,r),"aria-hidden":!0,children:a.jsx("span",{className:d.circle,children:a.jsx("span",{className:d.label,children:o})})})]})):null}function xt(e){return e}const Yo=F("span",{name:"MuiSlider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`color${N(r.color)}`],r.size!=="medium"&&t[`size${N(r.size)}`],r.marked&&t.marked,r.orientation==="vertical"&&t.vertical,r.track==="inverted"&&t.trackInverted,r.track===!1&&t.trackFalse]}})(te(({theme:e})=>({borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",WebkitTapHighlightColor:"transparent","@media print":{colorAdjust:"exact"},[`&.${le.disabled}`]:{pointerEvents:"none",cursor:"default",color:(e.vars||e).palette.grey[400]},[`&.${le.dragging}`]:{[`& .${le.thumb}, & .${le.track}`]:{transition:"none"}},variants:[...Object.entries(e.palette).filter(Je()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),{props:{orientation:"horizontal"},style:{height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}}},{props:{orientation:"horizontal",size:"small"},style:{height:2}},{props:{orientation:"horizontal",marked:!0},style:{marginBottom:20}},{props:{orientation:"vertical"},style:{height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}}},{props:{orientation:"vertical",size:"small"},style:{width:2}},{props:{orientation:"vertical",marked:!0},style:{marginRight:44}}]}))),qo=F("span",{name:"MuiSlider",slot:"Rail"})({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38,variants:[{props:{orientation:"horizontal"},style:{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:"inverted"},style:{opacity:1}}]}),Xo=F("span",{name:"MuiSlider",slot:"Track"})(te(({theme:e})=>({display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:e.transitions.create(["left","width","bottom","height"],{duration:e.transitions.duration.shortest}),variants:[{props:{size:"small"},style:{border:"none"}},{props:{orientation:"horizontal"},style:{height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:!1},style:{display:"none"}},...Object.entries(e.palette).filter(Je()).map(([t])=>({props:{color:t,track:"inverted"},style:{...e.vars?{backgroundColor:e.vars.palette.Slider[`${t}Track`],borderColor:e.vars.palette.Slider[`${t}Track`]}:{backgroundColor:e.lighten(e.palette[t].main,.62),borderColor:e.lighten(e.palette[t].main,.62),...e.applyStyles("dark",{backgroundColor:e.darken(e.palette[t].main,.5)}),...e.applyStyles("dark",{borderColor:e.darken(e.palette[t].main,.5)})}}}))]}))),Go=F("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.thumb,t[`thumbColor${N(r.color)}`],r.size!=="medium"&&t[`thumbSize${N(r.size)}`]]}})(te(({theme:e})=>({position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:e.transitions.create(["box-shadow","left","bottom"],{duration:e.transitions.duration.shortest}),"&::before":{position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(e.vars||e).shadows[2]},"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&.${le.disabled}`]:{"&:hover":{boxShadow:"none"}},variants:[{props:{size:"small"},style:{width:12,height:12,"&::before":{boxShadow:"none"}}},{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-50%, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 50%)"}},...Object.entries(e.palette).filter(Je()).map(([t])=>({props:{color:t},style:{[`&:hover, &.${le.focusVisible}`]:{boxShadow:`0px 0px 0px 8px ${e.alpha((e.vars||e).palette[t].main,.16)}`,"@media (hover: none)":{boxShadow:"none"}},[`&.${le.active}`]:{boxShadow:`0px 0px 0px 14px ${e.alpha((e.vars||e).palette[t].main,.16)}`}}}))]}))),Jo=F(Ko,{name:"MuiSlider",slot:"ValueLabel"})(te(({theme:e})=>({zIndex:1,whiteSpace:"nowrap",...e.typography.body2,fontWeight:500,transition:e.transitions.create(["transform"],{duration:e.transitions.duration.shortest}),position:"absolute",backgroundColor:(e.vars||e).palette.grey[600],borderRadius:2,color:(e.vars||e).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem",variants:[{props:{orientation:"horizontal"},style:{transform:"translateY(-100%) scale(0)",top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"},[`&.${le.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"}}},{props:{orientation:"vertical"},style:{transform:"translateY(-50%) scale(0)",right:"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"},[`&.${le.valueLabelOpen}`]:{transform:"translateY(-50%) scale(1)"}}},{props:{size:"small"},style:{fontSize:e.typography.pxToRem(12),padding:"0.25rem 0.5rem"}},{props:{orientation:"vertical",size:"small"},style:{right:"20px"}}]}))),Qo=F("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:e=>Ct(e)&&e!=="markActive",overridesResolver:(e,t)=>{const{markActive:r}=e;return[t.mark,r&&t.markActive]}})(te(({theme:e})=>({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor",variants:[{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-1px, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 1px)"}},{props:{markActive:!0},style:{backgroundColor:(e.vars||e).palette.background.paper,opacity:.8}}]}))),Zo=F("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:e=>Ct(e)&&e!=="markLabelActive"})(te(({theme:e})=>({...e.typography.body2,color:(e.vars||e).palette.text.secondary,position:"absolute",whiteSpace:"nowrap",variants:[{props:{orientation:"horizontal"},style:{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}}},{props:{orientation:"vertical"},style:{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}}},{props:{markLabelActive:!0},style:{color:(e.vars||e).palette.text.primary}}]}))),ea=e=>{const{disabled:t,dragging:r,marked:o,orientation:d,track:m,classes:b,color:s,size:u}=e,h={root:["root",t&&"disabled",r&&"dragging",o&&"marked",d==="vertical"&&"vertical",m==="inverted"&&"trackInverted",m===!1&&"trackFalse",s&&`color${N(s)}`,u&&`size${N(u)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",t&&"disabled",u&&`thumbSize${N(u)}`,s&&`thumbColor${N(s)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return we(h,Oo,b)},ta=({children:e})=>e,oa=g.forwardRef(function(t,r){const o=Te({props:t,name:"MuiSlider"}),d=Bt(),{"aria-label":m,"aria-valuetext":b,"aria-labelledby":s,component:u="span",components:h={},componentsProps:i={},color:M="primary",classes:k,className:A,disableSwap:B=!1,disabled:w=!1,getAriaLabel:v,getAriaValueText:H,marks:ee=!1,max:j=100,min:I=0,name:E,onChange:c,onChangeCommitted:p,orientation:_="horizontal",shiftStep:V=10,size:R="medium",step:G=1,scale:D=xt,slotProps:$,slots:C,tabIndex:Y,track:L="normal",value:pe,valueLabelDisplay:P="off",valueLabelFormat:oe=xt,...ie}=o,T={...o,isRtl:d,max:j,min:I,classes:k,disabled:w,disableSwap:B,orientation:_,marks:ee,color:M,size:R,step:G,shiftStep:V,scale:D,track:L,valueLabelDisplay:P,valueLabelFormat:oe},{axisProps:J,getRootProps:ke,getHiddenInputProps:Ce,getThumbProps:z,open:q,active:_e,axis:me,focusedThumbIndex:he,range:be,dragging:fe,marks:se,values:W,trackOffset:je,trackLeap:Qe,getThumbStyle:Ie}=Ho({...T,rootRef:r});T.marked=se.length>0&&se.some(O=>O.label),T.dragging=fe,T.focusedThumbIndex=he;const Q=ea(T),Me=C?.root??h.Root??Yo,ze=C?.rail??h.Rail??qo,Ne=C?.track??h.Track??Xo,Fe=C?.thumb??h.Thumb??Go,Be=C?.valueLabel??h.ValueLabel??Jo,Re=C?.mark??h.Mark??Qo,Ee=C?.markLabel??h.MarkLabel??Zo,l=C?.input??h.Input??"input",n=$?.root??i.root,f=$?.rail??i.rail,S=$?.track??i.track,y=$?.thumb??i.thumb,x=$?.valueLabel??i.valueLabel,ae=$?.mark??i.mark,ne=$?.markLabel??i.markLabel,K=$?.input??i.input,ue=xe({elementType:Me,getSlotProps:ke,externalSlotProps:n,externalForwardedProps:ie,additionalProps:{...Vo(Me)&&{as:u}},ownerState:{...T,...n?.ownerState},className:[Q.root,A]}),De=xe({elementType:ze,externalSlotProps:f,ownerState:T,className:Q.rail}),_t=xe({elementType:Ne,externalSlotProps:S,additionalProps:{style:{...J[me].offset(je),...J[me].leap(Qe)}},ownerState:{...T,...S?.ownerState},className:Q.track}),Ze=xe({elementType:Fe,getSlotProps:z,externalSlotProps:y,ownerState:{...T,...y?.ownerState},className:Q.thumb}),Rt=xe({elementType:Be,externalSlotProps:x,ownerState:{...T,...x?.ownerState},className:Q.valueLabel}),et=xe({elementType:Re,externalSlotProps:ae,ownerState:T,className:Q.mark}),tt=xe({elementType:Ee,externalSlotProps:ne,ownerState:T,className:Q.markLabel}),Lt=xe({elementType:l,getSlotProps:Ce,externalSlotProps:K,ownerState:T});return a.jsxs(Me,{...ue,children:[a.jsx(ze,{...De}),a.jsx(Ne,{..._t}),se.filter(O=>O.value>=I&&O.value<=j).map((O,X)=>{const ot=Ge(O.value,I,j),We=J[me].offset(ot);let ge;return L===!1?ge=W.includes(O.value):ge=L==="normal"&&(be?O.value>=W[0]&&O.value<=W[W.length-1]:O.value<=W[0])||L==="inverted"&&(be?O.value<=W[0]||O.value>=W[W.length-1]:O.value>=W[0]),a.jsxs(g.Fragment,{children:[a.jsx(Re,{"data-index":X,...et,...!Ye(Re)&&{markActive:ge},style:{...We,...et.style},className:re(et.className,ge&&Q.markActive)}),O.label!=null?a.jsx(Ee,{"aria-hidden":!0,"data-index":X,...tt,...!Ye(Ee)&&{markLabelActive:ge},style:{...We,...tt.style},className:re(Q.markLabel,tt.className,ge&&Q.markLabelActive),children:O.label}):null]},X)}),W.map((O,X)=>{const ot=Ge(O,I,j),We=J[me].offset(ot),ge=P==="off"?ta:Be;return a.jsx(ge,{...!Ye(ge)&&{valueLabelFormat:oe,valueLabelDisplay:P,value:typeof oe=="function"?oe(D(O),X):oe,index:X,open:q===X||_e===X||P==="on",disabled:w},...Rt,children:a.jsx(Fe,{"data-index":X,...Ze,className:re(Q.thumb,Ze.className,_e===X&&Q.active,he===X&&Q.focusVisible),style:{...We,...Ie(X),...Ze.style},children:a.jsx(l,{"data-index":X,"aria-label":v?v(X):m,"aria-valuenow":D(O),"aria-labelledby":s,"aria-valuetext":H?H(D(O),X):b,value:W[X],...Lt})})},X)})]})});function aa(e){return ye("MuiSwitch",e)}const Z=Se("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),ra=e=>{const{classes:t,edge:r,size:o,color:d,checked:m,disabled:b}=e,s={root:["root",r&&`edge${N(r)}`,`size${N(o)}`],switchBase:["switchBase",`color${N(d)}`,m&&"checked",b&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},u=we(s,aa,t);return{...t,...u}},sa=F("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.edge&&t[`edge${N(r.edge)}`],t[`size${N(r.size)}`]]}})({display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${Z.thumb}`]:{width:16,height:16},[`& .${Z.switchBase}`]:{padding:4,[`&.${Z.checked}`]:{transform:"translateX(16px)"}}}}]}),na=F(lo,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.switchBase,{[`& .${Z.input}`]:t.input},r.color!=="default"&&t[`color${N(r.color)}`]]}})(te(({theme:e})=>({position:"absolute",top:0,left:0,zIndex:1,color:e.vars?e.vars.palette.Switch.defaultColor:`${e.palette.mode==="light"?e.palette.common.white:e.palette.grey[300]}`,transition:e.transitions.create(["left","transform"],{duration:e.transitions.duration.shortest}),[`&.${Z.checked}`]:{transform:"translateX(20px)"},[`&.${Z.disabled}`]:{color:e.vars?e.vars.palette.Switch.defaultDisabledColor:`${e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[600]}`},[`&.${Z.checked} + .${Z.track}`]:{opacity:.5},[`&.${Z.disabled} + .${Z.track}`]:{opacity:e.vars?e.vars.opacity.switchTrackDisabled:`${e.palette.mode==="light"?.12:.2}`},[`& .${Z.input}`]:{left:"-100%",width:"300%"}})),te(({theme:e})=>({"&:hover":{backgroundColor:e.alpha((e.vars||e).palette.action.active,(e.vars||e).palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(e.palette).filter(Je(["light"])).map(([t])=>({props:{color:t},style:{[`&.${Z.checked}`]:{color:(e.vars||e).palette[t].main,"&:hover":{backgroundColor:e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Z.disabled}`]:{color:e.vars?e.vars.palette.Switch[`${t}DisabledColor`]:`${e.palette.mode==="light"?e.lighten(e.palette[t].main,.62):e.darken(e.palette[t].main,.55)}`}},[`&.${Z.checked} + .${Z.track}`]:{backgroundColor:(e.vars||e).palette[t].main}}}))]}))),la=F("span",{name:"MuiSwitch",slot:"Track"})(te(({theme:e})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:e.transitions.create(["opacity","background-color"],{duration:e.transitions.duration.shortest}),backgroundColor:e.vars?e.vars.palette.common.onBackground:`${e.palette.mode==="light"?e.palette.common.black:e.palette.common.white}`,opacity:e.vars?e.vars.opacity.switchTrack:`${e.palette.mode==="light"?.38:.3}`}))),ia=F("span",{name:"MuiSwitch",slot:"Thumb"})(te(({theme:e})=>({boxShadow:(e.vars||e).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}))),ca=g.forwardRef(function(t,r){const o=Te({props:t,name:"MuiSwitch"}),{className:d,color:m="primary",edge:b=!1,size:s="medium",sx:u,slots:h={},slotProps:i={},...M}=o,k={...o,color:m,edge:b,size:s},A=ra(k),B={slots:h,slotProps:i},[w,v]=de("root",{className:re(A.root,d),elementType:sa,externalForwardedProps:B,ownerState:k,additionalProps:{sx:u}}),[H,ee]=de("thumb",{className:A.thumb,elementType:ia,externalForwardedProps:B,ownerState:k}),j=a.jsx(H,{...ee}),[I,E]=de("track",{className:A.track,elementType:la,externalForwardedProps:B,ownerState:k});return a.jsxs(w,{...v,children:[a.jsx(na,{type:"checkbox",icon:j,checkedIcon:j,ref:r,ownerState:k,...M,classes:{...A,root:A.switchBase},slots:{...h.switchBase&&{root:h.switchBase},...h.input&&{input:h.input}},slotProps:{...i.switchBase&&{root:typeof i.switchBase=="function"?i.switchBase(k):i.switchBase},input:{role:"switch"},...i.input&&{input:typeof i.input=="function"?i.input(k):i.input}}}),a.jsx(I,{...E})]})}),da=Et(a.jsx("path",{d:"M3 17v2h6v-2zM3 5v2h10V5zm10 16v-2h8v-2h-8v-2h-2v6zM7 9v2H3v2h4v2h2V9zm14 4v-2H11v2zm-6-4h2V7h4V5h-4V3h-2z"})),ua=jt.memo(({attributes:e,deviceId:t,entityType:r})=>{const{t:o}=lt(),m=e?.relays||"[]",b=c=>{try{const p=JSON.parse(c);if(Array.isArray(p)&&p.length>0)return p}catch(p){console.error("Failed to parse relays:",p)}return[]},[s,u]=g.useState(()=>b(m)),[h]=g.useState(["Manual","Auto","Timer","Schedule"]),[i,M]=g.useState(0),[k,A]=g.useState(!1),[B,w]=g.useState(!0),[v,H]=g.useState({});g.useEffect(()=>{const c=b(m);u(c)},[m]),g.useEffect(()=>{k&&H({...s[i]})},[k,i,s]);const ee=c=>{const p=c.target.checked,_=s[i],V=[...s];if(V[i].state=p,u(V),t){const R={pin:_.pin,state:p};Wt(t,"setRelayState",R)}},j=c=>{const{name:p,value:_,type:V}=c.target;let R=_;V==="number"?(R=parseInt(_,10),isNaN(R)&&(R=0)):p==="datetime"&&(R=new Date(_).getTime()/1e3),H(G=>({...G,[p]:R})),w(!1)},I=(c,p)=>{const{name:_,value:V}=p.target,R=[...v.timers||[]];R[c]={...R[c],[_]:parseInt(V)},H(G=>({...G,timers:R})),w(!1)},E=async()=>{if(!t||!r)return;const c=[...s];c[i]={...c[i],...v},u(c),w(!0),Ht.promise(Vt(r,t,"SHARED_SCOPE",{relays:c}),{pending:o("device.genericConfig.saving"),success:o("device.genericConfig.saveSuccess"),error:o("device.genericConfig.saveError")}),A(!1)};return a.jsx(qe,{children:a.jsxs(Xe,{children:[a.jsx(U,{variant:"h6",gutterBottom:!0,children:o("relays_controller")}),a.jsx(ve,{sx:{display:"flex",flexWrap:"wrap",gap:2},children:s.map((c,p)=>a.jsxs(ve,{sx:{flex:"1 1 calc(50% - 1rem)","@media (min-width:600px)":{flex:"1 1 calc(33.333% - 1rem)"},"@media (min-width:900px)":{flex:"1 1 calc(25% - 1rem)"}},children:[a.jsx(qe,{onClick:()=>M(p),sx:{textAlign:"center",borderColor:c.state?"success.main":"error.main",borderWidth:1,borderStyle:"solid",bgcolor:c.state?"success.light":"error.light",cursor:"pointer"},children:a.jsxs(Xe,{children:[a.jsx(U,{variant:"h6",children:`${p+1}`}),a.jsx(U,{variant:"caption",children:a.jsx("strong",{children:c.label.length>10?`${c.label.substring(0,10)}...`:c.label})}),a.jsx(U,{variant:"caption",children:a.jsx("strong",{children:o(c.state?"relay_state_on":"relay_state_off")})})]})}),a.jsx(U,{variant:"body2",sx:{textAlign:"center"},children:c.mode===0?o("relay_mode_manual"):o("relay_mode_auto")})]},p))}),a.jsx(ht,{sx:{my:2}}),a.jsxs(Pe,{direction:"row",spacing:1,alignItems:"center",children:[a.jsxs(dt,{fullWidth:!0,variant:"outlined",size:"small",children:[a.jsx(ut,{id:"relay-select-label",children:o("select_relay_to_control")}),a.jsx(pt,{labelId:"relay-select-label",value:i,label:o("select_relay_to_control"),onChange:c=>M(Number(c.target.value)),children:s.map((c,p)=>a.jsx(mt,{value:p,children:`Relay ${c.pin+1} - ${c.label==="No label"?o("relay_label_no_label"):c.label}`},c.pin))})]}),a.jsx(st,{startIcon:a.jsx(da,{}),variant:"outlined",size:"small",onClick:()=>A(!0),children:o("relay_adjust_button")})]}),a.jsx(ht,{sx:{my:2}}),a.jsxs(ve,{children:[a.jsx($o,{control:a.jsx(ca,{checked:s[i]?.state||!1,onChange:ee,disabled:s[i]?.mode!==0}),label:o("relay_status",{status:s[i]?.state?o("relay_state_on"):o("relay_state_off")})}),a.jsxs(ve,{children:[a.jsx(U,{variant:"body2",dangerouslySetInnerHTML:{__html:o("relay_operated_by",{mode:h[s[i]?.mode]||h[0]})}}),s[i]?.mode===0&&s[i]?.autoOff>0&&a.jsx(U,{variant:"body2",dangerouslySetInnerHTML:{__html:o("relay_auto_off",{seconds:s[i].autoOff})}}),s[i]?.mode===1&&a.jsx(U,{variant:"body2",dangerouslySetInnerHTML:{__html:o("relay_duty_cycle",{dutyCycle:s[i].dutyCycle,seconds:s[i].dutyRange})}}),s[i]?.mode===2&&s[i].timers.map((c,p)=>c.d>0&&a.jsx(U,{variant:"body2",dangerouslySetInnerHTML:{__html:o("relay_timer_operation",{index:p+1,h:c.h,i:c.i,s:c.s,d:c.d})}},p)),s[i]?.mode===3&&a.jsx(U,{variant:"body2",dangerouslySetInnerHTML:{__html:o("relay_specific_datetime",{datetime:s[i].datetime?new Date(s[i].datetime*1e3).toISOString().slice(0,16):"",duration:s[i].duration})}})]})]}),a.jsxs(bo,{open:k,onClose:()=>A(!1),fullWidth:!0,maxWidth:"sm",children:[a.jsx(_o,{children:o("adjust_relay_title",{index:i+1,label:s[i]?.label})}),a.jsx(jo,{children:a.jsxs(Pe,{spacing:2,sx:{mt:1},children:[a.jsx(ce,{label:o("relay_label_label"),name:"label",value:v.label||"",onChange:j,fullWidth:!0,size:"small",helperText:o("relay_label_helper",{index:i+1})}),a.jsx(ce,{label:o("overrun_threshold_label"),name:"overrunInSec",type:"number",value:v.overrunInSec||"",onChange:j,fullWidth:!0,size:"small",helperText:o("overrun_threshold_helper")}),a.jsx(ce,{label:o("wattage_label"),name:"wattage",type:"number",value:v.wattage||"",onChange:j,fullWidth:!0,size:"small",helperText:o("wattage_helper")}),a.jsxs(dt,{fullWidth:!0,size:"small",children:[a.jsx(ut,{children:o("select_relay_mode")}),a.jsx(pt,{name:"mode",value:v.mode??0,onChange:c=>{H(p=>({...p,mode:Number(c.target.value)})),w(!1)},label:o("select_relay_mode"),children:h.map((c,p)=>a.jsx(mt,{value:p,children:c},p))})]}),v.mode===0&&a.jsx(ce,{label:o("auto_off_label"),name:"autoOff",type:"number",value:v.autoOff||"",onChange:j,fullWidth:!0,size:"small",helperText:o("auto_off_helper")}),v.mode===1&&a.jsxs(Pe,{spacing:2,children:[a.jsx(U,{gutterBottom:!0,children:o("duty_cycle_label",{dutyCycle:v.dutyCycle})}),a.jsx(oa,{name:"dutyCycle",value:v.dutyCycle||0,onChange:(c,p)=>{H(_=>({..._,dutyCycle:p})),w(!1)},valueLabelDisplay:"auto",step:1,marks:!0,min:0,max:100}),a.jsx(ce,{label:o("duty_range_label"),name:"dutyRange",type:"number",value:v.dutyRange||"",onChange:j,fullWidth:!0,size:"small",helperText:o("duty_range_helper")})]}),v.mode===2&&a.jsxs(Pe,{spacing:2,children:[a.jsx(U,{children:o("timer_configuration_label")}),a.jsx(U,{variant:"caption",children:o("timer_configuration_helper")}),(v.timers||[]).map((c,p)=>a.jsxs(Pe,{direction:"row",spacing:1,children:[a.jsx(ce,{name:"h",type:"number",value:c.h,placeholder:o("hour_placeholder"),onChange:_=>I(p,_),size:"small"}),a.jsx(ce,{name:"i",type:"number",value:c.i,placeholder:o("minute_placeholder"),onChange:_=>I(p,_),size:"small"}),a.jsx(ce,{name:"s",type:"number",value:c.s,placeholder:o("second_placeholder"),onChange:_=>I(p,_),size:"small"}),a.jsx(ce,{name:"d",type:"number",value:c.d,placeholder:o("duration_placeholder"),onChange:_=>I(p,_),size:"small"})]},p))]}),v.mode===3&&a.jsxs(Pe,{spacing:2,children:[a.jsx(ce,{type:"datetime-local",name:"datetime",value:v.datetime?new Date(v.datetime*1e3).toISOString().slice(0,16):"",onChange:j,fullWidth:!0,size:"small",helperText:o("datetime_helper")}),a.jsx(ce,{label:o("duration_label"),name:"duration",type:"number",value:v.duration||"",onChange:j,fullWidth:!0,size:"small",helperText:o("duration_helper")})]})]})}),a.jsxs(vo,{children:[a.jsx(st,{onClick:()=>A(!1),children:o("cancel")}),a.jsx(st,{onClick:E,variant:"contained",disabled:B,children:o("save_button")})]})]})]})})}),vt=720,pa=jt.memo(({attributes:e})=>{const{t}=lt(),[r,o]=g.useState([]),d=wt(),m=Ot(d.breakpoints.down("sm"));g.useEffect(()=>{if(e){const h=Number(e._amp||0),i=Number(e._volt||0),M=Number(e._watt||0),k=Number(e._pf||0),A={name:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}),_amp:h,_volt:i,_watt:M,_pf:k};o(B=>{if(B.length>0&&B[B.length-1].name===A.name)return B;const w=[...B,A];return w.length>vt?w.slice(w.length-vt):w})}},[e]);const b=(h,i)=>{const M=e?.[h];if(M==null)return"N/A";const k=Number(M);return isNaN(k)?"N/A":i!==void 0?k.toFixed(i):String(Math.round(k))},s=(h,i,M)=>a.jsxs(ve,{sx:{textAlign:"center",flex:"1 1 calc(50% - 1rem)","@media (min-width:600px)":{flex:"1 1 calc(33.333% - 1rem)"},"@media (min-width:900px)":{flex:"1 1 calc(16.666% - 1rem)"},p:1},children:[a.jsx(U,{variant:"subtitle1",children:h}),a.jsxs(U,{variant:"h5",children:[i," ",M]})]}),u=[{dataKey:"_amp",label:t("powerSensor._amp"),color:"#8884d8"},{dataKey:"_volt",label:t("powerSensor._volt"),color:"#82ca9d"},{dataKey:"_watt",label:t("powerSensor._watt"),color:"#ffc658"},{dataKey:"_pf",label:t("powerSensor._pf"),color:"#ff7300"}];return a.jsxs(Pe,{spacing:2,children:[a.jsx(qe,{children:a.jsxs(Xe,{children:[a.jsx(U,{variant:"h6",gutterBottom:!0,children:t("powerSensor.title")}),a.jsxs(ve,{sx:{display:"flex",flexWrap:"wrap",gap:2},children:[s(t("powerSensor._amp"),b("_amp",2),"A"),s(t("powerSensor._volt"),b("_volt",0),"V"),s(t("powerSensor._watt"),b("_watt",0),"W"),s(t("powerSensor._ener"),b("_ener",2),"kWh"),s(t("powerSensor._freq"),b("_freq",1),"Hz"),s(t("powerSensor._pf"),b("_pf",2),"")]})]})}),a.jsx(ve,{sx:{display:"flex",flexWrap:"wrap",gap:2},children:u.map(h=>a.jsx(ve,{sx:{flex:"1 1 100%","@media (min-width:900px)":{flex:"1 1 calc(50% - 1rem)"}},children:a.jsx(qe,{children:a.jsxs(Xe,{children:[a.jsx(U,{variant:"subtitle1",align:"center",children:h.label}),a.jsx(Kt,{width:"100%",height:m?200:300,children:a.jsxs(Yt,{data:r,margin:{top:5,right:30,left:0,bottom:5},children:[a.jsx(qt,{strokeDasharray:"3 3"}),a.jsx(Xt,{dataKey:"name",interval:"preserveStartEnd",tick:{fontSize:12}}),a.jsx(Gt,{tick:{fontSize:12}}),a.jsx(Jt,{}),a.jsx(Qt,{}),a.jsx(Zt,{type:"monotone",dataKey:h.dataKey,name:h.label,stroke:h.color,dot:!1,isAnimationActive:!1})]})})]})})},h.dataKey))})]})}),ba=()=>{const{t:e}=lt(),{device:t}=Ut(),r=[{label:e("device.dashboardTabs.monitor"),content:a.jsx(pa,{attributes:t?.attributesClientScope})},{label:e("device.dashboardTabs.control"),content:a.jsx(ua,{attributes:t?.attributesClientScope,deviceId:t?.id.id,entityType:t?.id.entityType})},{label:e("device.dashboardTabs.analytic"),content:t?a.jsx(eo,{deviceId:t.id.id,entityType:t.id.entityType}):null},{label:e("device.dashboardTabs.config"),content:a.jsx(to,{attributes:t?.attributesClientScope,deviceId:t?.id.id,entityType:t?.id.entityType})}];return a.jsx(oo,{tabs:r})};export{ba as default};
