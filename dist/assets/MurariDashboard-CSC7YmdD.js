import{R as v,H as j,r as h,i as M,W as C,j as e,T as c,I as d,X as A}from"./index-CIZpIcYM.js";import{S,C as p,a as f,R as w,L as N,b as D,X as K,Y as k,T as E,c as L,d as R,e as I,f as X,g as z}from"./TimeseriesVisualizer-CPEKX3dO.js";const b=720,W=v.memo(({attributes:i})=>{const{t}=j(),[x,g]=h.useState([]),y=M(),_=C(y.breakpoints.down("sm"));h.useEffect(()=>{if(i){const a=Number(i._temp||0),s=Number(i._rh||0),r=Number(i._lux||0),n={name:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}),_temp:a,_rh:s,_lux:r};g(o=>{if(o.length>0&&o[o.length-1].name===n.name)return o;const l=[...o,n];return l.length>b?l.slice(l.length-b):l})}},[i]);const m=(a,s)=>{const r=i?.[a];if(r==null)return"N/A";const n=Number(r);return isNaN(n)?"N/A":s!==void 0?n.toFixed(s):String(Math.round(n))},u=(a,s,r)=>e.jsxs(d,{sx:{textAlign:"center",flex:"1 1 calc(50% - 1rem)","@media (min-width:600px)":{flex:"1 1 calc(33.333% - 1rem)"},"@media (min-width:900px)":{flex:"1 1 calc(16.666% - 1rem)"},p:1},children:[e.jsx(c,{variant:"subtitle1",children:a}),e.jsxs(c,{variant:"h5",children:[s," ",r]})]}),T=[{dataKey:"_temp",label:t("murariMonitor._temp"),color:"#8884d8"},{dataKey:"_rh",label:t("murariMonitor._rh"),color:"#82ca9d"},{dataKey:"_lux",label:t("murariMonitor._lux"),color:"#ffc658"}];return e.jsxs(S,{spacing:2,children:[e.jsx(p,{children:e.jsxs(f,{children:[e.jsx(c,{variant:"h6",gutterBottom:!0,children:t("murariMonitor.title")}),e.jsxs(d,{sx:{display:"flex",flexWrap:"wrap",gap:2},children:[u(t("murariMonitor._temp"),m("_temp",2),"Â°C"),u(t("murariMonitor._rh"),m("_rh",0),"%"),u(t("murariMonitor._lux"),m("_lux",0),"lx")]})]})}),e.jsx(d,{sx:{display:"flex",flexWrap:"wrap",gap:2},children:T.map(a=>e.jsx(d,{sx:{flex:"1 1 100%","@media (min-width:900px)":{flex:"1 1 calc(50% - 1rem)"}},children:e.jsx(p,{children:e.jsxs(f,{children:[e.jsx(c,{variant:"subtitle1",align:"center",children:a.label}),e.jsx(w,{width:"100%",height:_?200:300,children:e.jsxs(N,{data:x,margin:{top:5,right:30,left:0,bottom:5},children:[e.jsx(D,{strokeDasharray:"3 3"}),e.jsx(K,{dataKey:"name",interval:"preserveStartEnd",tick:{fontSize:12}}),e.jsx(k,{tick:{fontSize:12}}),e.jsx(E,{}),e.jsx(L,{}),e.jsx(R,{type:"monotone",dataKey:a.dataKey,name:a.label,stroke:a.color,dot:!1,isAnimationActive:!1})]})})]})})},a.dataKey))})]})}),Y=()=>{const{t:i}=j(),{device:t}=A(),x=[{label:i("device.dashboardTabs.monitor"),content:e.jsx(W,{attributes:t?.attributesClientScope})},{label:i("device.dashboardTabs.analytic"),content:t?e.jsx(I,{deviceId:t.id.id,entityType:t.id.entityType}):null},{label:i("device.dashboardTabs.config"),content:e.jsx(X,{attributes:t?.attributesClientScope,deviceId:t?.id.id,entityType:t?.id.entityType})}];return e.jsx(z,{tabs:x})};export{Y as default};
