import{g as Se,a as ke,r as g,u as kt,b as wt,c as de,s as N,j as a,d as z,e as we,B as Dt,f as $t,h as Te,i as Ct,P as jt,F as dt,k as It,l as re,M as zt,m as Nt,n as te,T as O,o as Ft,p as De,q as Bt,t as Et,v as ot,w as Ke,x as rt,y as ut,z as Ye,A as Wt,C as ye,D as Je,E as Pt,R as Tt,G as ct,H as ve,I as pt,J as mt,S as ht,K as bt,L as st,N as Ht,O as ce,Q as nt,U as lt,V as Ot,W as Vt,X as Ut}from"./index-4A5jEiro.js";import{C as qe,a as Xe,D as ft,S as xe,R as Kt,L as Yt,b as qt,X as Xt,Y as Gt,T as Jt,c as Qt,d as Zt,A as ea,e as ta,f as aa,g as oa,h as ra}from"./DeviceOperation-nWm-CjXS.js";function sa(e){return Se("PrivateSwitchBase",e)}ke("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const na=e=>{const{classes:t,checked:o,disabled:s,edge:r}=e,h={root:["root",o&&"checked",s&&"disabled",r&&`edge${z(r)}`],input:["input"]};return we(h,sa,t)},la=N(Dt,{name:"MuiSwitchBase"})({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:e,ownerState:t})=>e==="start"&&t.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:e,ownerState:t})=>e==="end"&&t.size!=="small",style:{marginRight:-12}}]}),ia=N("input",{name:"MuiSwitchBase",shouldForwardProp:$t})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),ca=g.forwardRef(function(t,o){const{autoFocus:s,checked:r,checkedIcon:h,defaultChecked:b,disabled:d,disableFocusRipple:p=!1,edge:i=!1,icon:x,id:D,inputProps:u,inputRef:F,name:$,onBlur:j,onChange:K,onFocus:E,readOnly:C,required:M=!1,tabIndex:W,type:A,value:G,slots:J={},slotProps:c={},...m}=t,[S,U]=kt({controlled:r,default:!!b,name:"SwitchBase",state:"checked"}),y=wt(),T=I=>{E&&E(I),y&&y.onFocus&&y.onFocus(I)},P=I=>{j&&j(I),y&&y.onBlur&&y.onBlur(I)},Y=I=>{if(I.nativeEvent.defaultPrevented)return;const q=I.target.checked;U(q),K&&K(I,q)};let L=d;y&&typeof L>"u"&&(L=y.disabled);const pe=A==="checkbox"||A==="radio",_={...t,checked:S,disabled:L,disableFocusRipple:p,edge:i},ae=na(_),ie={slots:J,slotProps:{input:u,...c}},[R,Q]=de("root",{ref:o,elementType:la,className:ae.root,shouldForwardComponentProp:!0,externalForwardedProps:{...ie,component:"span",...m},getSlotProps:I=>({...I,onFocus:q=>{I.onFocus?.(q),T(q)},onBlur:q=>{I.onBlur?.(q),P(q)}}),ownerState:_,additionalProps:{centerRipple:!0,focusRipple:!p,disabled:L,role:void 0,tabIndex:null}}),[Ce,je]=de("input",{ref:F,elementType:ia,className:ae.input,externalForwardedProps:ie,getSlotProps:I=>({...I,onChange:q=>{I.onChange?.(q),Y(q)}}),ownerState:_,additionalProps:{autoFocus:s,checked:r,defaultChecked:b,disabled:L,id:pe?D:void 0,name:$,readOnly:C,required:M,tabIndex:W,type:A,...A==="checkbox"&&G===void 0?{}:{value:G}}});return a.jsxs(R,{...Q,children:[a.jsx(Ce,{...je}),S?h:x]})});function da(e){return Se("MuiDialog",e)}const it=ke("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),_t=g.createContext({}),ua=N(Nt,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),pa=e=>{const{classes:t,scroll:o,maxWidth:s,fullWidth:r,fullScreen:h}=e,b={root:["root"],container:["container",`scroll${z(o)}`],paper:["paper",`paperScroll${z(o)}`,`paperWidth${z(String(s))}`,r&&"paperFullWidth",h&&"paperFullScreen"]};return we(b,da,t)},ma=N(zt,{name:"MuiDialog",slot:"Root"})({"@media print":{position:"absolute !important"}}),ha=N("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.container,t[`scroll${z(o.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),ba=N(jt,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.paper,t[`scrollPaper${z(o.scroll)}`],t[`paperWidth${z(String(o.maxWidth))}`],o.fullWidth&&t.paperFullWidth,o.fullScreen&&t.paperFullScreen]}})(te(({theme:e})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:t})=>!t.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:e.breakpoints.unit==="px"?Math.max(e.breakpoints.values.xs,444):`max(${e.breakpoints.values.xs}${e.breakpoints.unit}, 444px)`,[`&.${it.paperScrollBody}`]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(e.breakpoints.values).filter(t=>t!=="xs").map(t=>({props:{maxWidth:t},style:{maxWidth:`${e.breakpoints.values[t]}${e.breakpoints.unit}`,[`&.${it.paperScrollBody}`]:{[e.breakpoints.down(e.breakpoints.values[t]+64)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:t})=>t.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:t})=>t.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${it.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),fa=g.forwardRef(function(t,o){const s=Te({props:t,name:"MuiDialog"}),r=Ct(),h={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{"aria-describedby":b,"aria-labelledby":d,"aria-modal":p=!0,BackdropComponent:i,BackdropProps:x,children:D,className:u,disableEscapeKeyDown:F=!1,fullScreen:$=!1,fullWidth:j=!1,maxWidth:K="sm",onClick:E,onClose:C,open:M,PaperComponent:W=jt,PaperProps:A={},scroll:G="paper",slots:J={},slotProps:c={},TransitionComponent:m=dt,transitionDuration:S=h,TransitionProps:U,...y}=s,T={...s,disableEscapeKeyDown:F,fullScreen:$,fullWidth:j,maxWidth:K,scroll:G},P=pa(T),Y=g.useRef(),L=B=>{Y.current=B.target===B.currentTarget},pe=B=>{E&&E(B),Y.current&&(Y.current=null,C&&C(B,"backdropClick"))},_=It(d),ae=g.useMemo(()=>({titleId:_}),[_]),ie={transition:m,...J},R={transition:U,paper:A,backdrop:x,...c},Q={slots:ie,slotProps:R},[Ce,je]=de("root",{elementType:ma,shouldForwardComponentProp:!0,externalForwardedProps:Q,ownerState:T,className:re(P.root,u),ref:o}),[I,q]=de("backdrop",{elementType:ua,shouldForwardComponentProp:!0,externalForwardedProps:Q,ownerState:T}),[_e,me]=de("paper",{elementType:ba,shouldForwardComponentProp:!0,externalForwardedProps:Q,ownerState:T,className:re(P.paper,A.className)}),[he,be]=de("container",{elementType:ha,externalForwardedProps:Q,ownerState:T,className:P.container}),[fe,se]=de("transition",{elementType:dt,externalForwardedProps:Q,ownerState:T,additionalProps:{appear:!0,in:M,timeout:S,role:"presentation"}});return a.jsx(Ce,{closeAfterTransition:!0,slots:{backdrop:I},slotProps:{backdrop:{transitionDuration:S,as:i,...q}},disableEscapeKeyDown:F,onClose:C,open:M,onClick:pe,...je,...y,children:a.jsx(fe,{...se,children:a.jsx(he,{onMouseDown:L,...be,children:a.jsx(_e,{as:W,elevation:24,role:"dialog","aria-describedby":b,"aria-labelledby":_,"aria-modal":p,...me,children:a.jsx(_t.Provider,{value:ae,children:D})})})})})});function ga(e){return Se("MuiDialogActions",e)}ke("MuiDialogActions",["root","spacing"]);const xa=e=>{const{classes:t,disableSpacing:o}=e;return we({root:["root",!o&&"spacing"]},ga,t)},ya=N("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,!o.disableSpacing&&t.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:({ownerState:e})=>!e.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),va=g.forwardRef(function(t,o){const s=Te({props:t,name:"MuiDialogActions"}),{className:r,disableSpacing:h=!1,...b}=s,d={...s,disableSpacing:h},p=xa(d);return a.jsx(ya,{className:re(p.root,r),ownerState:d,ref:o,...b})});function Sa(e){return Se("MuiDialogContent",e)}ke("MuiDialogContent",["root","dividers"]);function ka(e){return Se("MuiDialogTitle",e)}const wa=ke("MuiDialogTitle",["root"]),Ca=e=>{const{classes:t,dividers:o}=e;return we({root:["root",o&&"dividers"]},Sa,t)},ja=N("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.dividers&&t.dividers]}})(te(({theme:e})=>({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:({ownerState:t})=>t.dividers,style:{padding:"16px 24px",borderTop:`1px solid ${(e.vars||e).palette.divider}`,borderBottom:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>!t.dividers,style:{[`.${wa.root} + &`]:{paddingTop:0}}}]}))),Pa=g.forwardRef(function(t,o){const s=Te({props:t,name:"MuiDialogContent"}),{className:r,dividers:h=!1,...b}=s,d={...s,dividers:h},p=Ca(d);return a.jsx(ja,{className:re(p.root,r),ownerState:d,ref:o,...b})}),Ta=e=>{const{classes:t}=e;return we({root:["root"]},ka,t)},_a=N(O,{name:"MuiDialogTitle",slot:"Root"})({padding:"16px 24px",flex:"0 0 auto"}),Ra=g.forwardRef(function(t,o){const s=Te({props:t,name:"MuiDialogTitle"}),{className:r,id:h,...b}=s,d=s,p=Ta(d),{titleId:i=h}=g.useContext(_t);return a.jsx(_a,{component:"h2",className:re(p.root,r),ownerState:d,ref:o,variant:"h6",id:h??i,...b})});function Ma(e){return Se("MuiFormControlLabel",e)}const $e=ke("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),La=e=>{const{classes:t,disabled:o,labelPlacement:s,error:r,required:h}=e,b={root:["root",o&&"disabled",`labelPlacement${z(s)}`,r&&"error",h&&"required"],label:["label",o&&"disabled"],asterisk:["asterisk",r&&"error"]};return we(b,Ma,t)},Aa=N("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[{[`& .${$e.label}`]:t.label},t.root,t[`labelPlacement${z(o.labelPlacement)}`]]}})(te(({theme:e})=>({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${$e.disabled}`]:{cursor:"default"},[`& .${$e.label}`]:{[`&.${$e.disabled}`]:{color:(e.vars||e).palette.text.disabled}},variants:[{props:{labelPlacement:"start"},style:{flexDirection:"row-reverse",marginRight:-11}},{props:{labelPlacement:"top"},style:{flexDirection:"column-reverse"}},{props:{labelPlacement:"bottom"},style:{flexDirection:"column"}},{props:({labelPlacement:t})=>t==="start"||t==="top"||t==="bottom",style:{marginLeft:16}}]}))),Da=N("span",{name:"MuiFormControlLabel",slot:"Asterisk"})(te(({theme:e})=>({[`&.${$e.error}`]:{color:(e.vars||e).palette.error.main}}))),$a=g.forwardRef(function(t,o){const s=Te({props:t,name:"MuiFormControlLabel"}),{checked:r,className:h,componentsProps:b={},control:d,disabled:p,disableTypography:i,inputRef:x,label:D,labelPlacement:u="end",name:F,onChange:$,required:j,slots:K={},slotProps:E={},value:C,...M}=s,W=wt(),A=p??d.props.disabled??W?.disabled,G=j??d.props.required,J={disabled:A,required:G};["checked","name","onChange","value","inputRef"].forEach(Y=>{typeof d.props[Y]>"u"&&typeof s[Y]<"u"&&(J[Y]=s[Y])});const c=Ft({props:s,muiFormControl:W,states:["error"]}),m={...s,disabled:A,labelPlacement:u,required:G,error:c.error},S=La(m),U={slots:K,slotProps:{...b,...E}},[y,T]=de("typography",{elementType:O,externalForwardedProps:U,ownerState:m});let P=D;return P!=null&&P.type!==O&&!i&&(P=a.jsx(y,{component:"span",...T,className:re(S.label,T?.className),children:P})),a.jsxs(Aa,{className:re(S.root,h),ownerState:m,ref:o,...M,children:[g.cloneElement(d,J),G?a.jsxs("div",{children:[P,a.jsxs(Da,{ownerState:m,"aria-hidden":!0,className:S.asterisk,children:["â€‰","*"]})]}):P]})}),Ia={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function za(e,t,o=(s,r)=>s===r){return e.length===t.length&&e.every((s,r)=>o(s,t[r]))}const Na=2;function Me(e,t,o,s,r){return o===1?Math.min(e+t,r):Math.max(e-t,s)}function Rt(e,t){return e-t}function gt(e,t){const{index:o}=e.reduce((s,r,h)=>{const b=Math.abs(t-r);return s===null||b<s.distance||b===s.distance?{distance:b,index:h}:s},null)??{};return o}function He(e,t){if(t.current!==void 0&&e.changedTouches){const o=e;for(let s=0;s<o.changedTouches.length;s+=1){const r=o.changedTouches[s];if(r.identifier===t.current)return{x:r.clientX,y:r.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function Ge(e,t,o){return(e-t)*100/(o-t)}function Fa(e,t,o){return(o-t)*e+t}function Ba(e){if(Math.abs(e)<1){const o=e.toExponential().split("e-"),s=o[0].split(".")[1];return(s?s.length:0)+parseInt(o[1],10)}const t=e.toString().split(".")[1];return t?t.length:0}function Ea(e,t,o){const s=Math.round((e-o)/t)*t+o;return Number(s.toFixed(Ba(t)))}function xt({values:e,newValue:t,index:o}){const s=e.slice();return s[o]=t,s.sort(Rt)}function Oe({sliderRef:e,activeIndex:t,setActive:o}){const s=Ke(e.current);(!e.current?.contains(s.activeElement)||Number(s?.activeElement?.getAttribute("data-index"))!==t)&&e.current?.querySelector(`[type="range"][data-index="${t}"]`).focus(),o&&o(t)}function Ve(e,t){return typeof e=="number"&&typeof t=="number"?e===t:typeof e=="object"&&typeof t=="object"?za(e,t):!1}const Wa={horizontal:{offset:e=>({left:`${e}%`}),leap:e=>({width:`${e}%`})},"horizontal-reverse":{offset:e=>({right:`${e}%`}),leap:e=>({width:`${e}%`})},vertical:{offset:e=>({bottom:`${e}%`}),leap:e=>({height:`${e}%`})}},Ha=e=>e;let Ue;function yt(){return Ue===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?Ue=CSS.supports("touch-action","none"):Ue=!0),Ue}function Oa(e){const{"aria-labelledby":t,defaultValue:o,disabled:s=!1,disableSwap:r=!1,isRtl:h=!1,marks:b=!1,max:d=100,min:p=0,name:i,onChange:x,onChangeCommitted:D,orientation:u="horizontal",rootRef:F,scale:$=Ha,step:j=1,shiftStep:K=10,tabIndex:E,value:C}=e,M=g.useRef(void 0),[W,A]=g.useState(-1),[G,J]=g.useState(-1),[c,m]=g.useState(!1),S=g.useRef(0),U=g.useRef(null),[y,T]=kt({controlled:C,default:o??p,name:"Slider"}),P=x&&((l,n,f)=>{const w=l.nativeEvent||l,k=new w.constructor(w.type,w);Object.defineProperty(k,"target",{writable:!0,value:{value:n,name:i}}),U.current=n,x(k,n,f)}),Y=Array.isArray(y);let L=Y?y.slice().sort(Rt):[y];L=L.map(l=>l==null?p:De(l,p,d));const pe=b===!0&&j!==null?[...Array(Math.floor((d-p)/j)+1)].map((l,n)=>({value:p+j*n})):b||[],_=pe.map(l=>l.value),[ae,ie]=g.useState(-1),R=g.useRef(null),Q=Bt(F,R),Ce=l=>n=>{const f=Number(n.currentTarget.getAttribute("data-index"));ut(n.target)&&ie(f),J(f),l?.onFocus?.(n)},je=l=>n=>{ut(n.target)||ie(-1),J(-1),l?.onBlur?.(n)},I=(l,n)=>{const f=Number(l.currentTarget.getAttribute("data-index")),w=L[f],k=_.indexOf(w);let v=n;if(pe&&j==null){const oe=_[_.length-1];v>=oe?v=oe:v<=_[0]?v=_[0]:v=v<w?_[k-1]:_[k+1]}if(v=De(v,p,d),Y){r&&(v=De(v,L[f-1]||-1/0,L[f+1]||1/0));const oe=v;v=xt({values:L,newValue:v,index:f});let ne=f;r||(ne=v.indexOf(oe)),Oe({sliderRef:R,activeIndex:ne})}T(v),ie(f),P&&!Ve(v,y)&&P(l,v,f),D&&D(l,U.current??v)},q=l=>n=>{if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","PageUp","PageDown","Home","End"].includes(n.key)){n.preventDefault();const f=Number(n.currentTarget.getAttribute("data-index")),w=L[f];let k=null;if(j!=null){const v=n.shiftKey?K:j;switch(n.key){case"ArrowUp":k=Me(w,v,1,p,d);break;case"ArrowRight":k=Me(w,v,h?-1:1,p,d);break;case"ArrowDown":k=Me(w,v,-1,p,d);break;case"ArrowLeft":k=Me(w,v,h?1:-1,p,d);break;case"PageUp":k=Me(w,K,1,p,d);break;case"PageDown":k=Me(w,K,-1,p,d);break;case"Home":k=p;break;case"End":k=d;break}}else if(pe){const v=_[_.length-1],oe=_.indexOf(w),ne=[h?"ArrowRight":"ArrowLeft","ArrowDown","PageDown","Home"],V=[h?"ArrowLeft":"ArrowRight","ArrowUp","PageUp","End"];ne.includes(n.key)?oe===0?k=_[0]:k=_[oe-1]:V.includes(n.key)&&(oe===_.length-1?k=v:k=_[oe+1])}k!=null&&I(n,k)}l?.onKeyDown?.(n)};Et(()=>{s&&R.current.contains(document.activeElement)&&document.activeElement?.blur()},[s]),s&&W!==-1&&A(-1),s&&ae!==-1&&ie(-1);const _e=l=>n=>{l.onChange?.(n),I(n,n.target.valueAsNumber)},me=g.useRef(void 0);let he=u;h&&u==="horizontal"&&(he+="-reverse");const be=({finger:l,move:n=!1})=>{const{current:f}=R,{width:w,height:k,bottom:v,left:oe}=f.getBoundingClientRect();let ne;he.startsWith("vertical")?ne=(v-l.y)/k:ne=(l.x-oe)/w,he.includes("-reverse")&&(ne=1-ne);let V;if(V=Fa(ne,p,d),j)V=Ea(V,j,p);else{const Ae=gt(_,V);V=_[Ae]}V=De(V,p,d);let ue=0;if(Y){n?ue=me.current:ue=gt(L,V),r&&(V=De(V,L[ue-1]||-1/0,L[ue+1]||1/0));const Ae=V;V=xt({values:L,newValue:V,index:ue}),r&&n||(ue=V.indexOf(Ae),me.current=ue)}return{newValue:V,activeIndex:ue}},fe=ot(l=>{const n=He(l,M);if(!n)return;if(S.current+=1,l.type==="mousemove"&&l.buttons===0){se(l);return}const{newValue:f,activeIndex:w}=be({finger:n,move:!0});Oe({sliderRef:R,activeIndex:w,setActive:A}),T(f),!c&&S.current>Na&&m(!0),P&&!Ve(f,y)&&P(l,f,w)}),se=ot(l=>{const n=He(l,M);if(m(!1),!n)return;const{newValue:f}=be({finger:n,move:!0});A(-1),l.type==="touchend"&&J(-1),D&&D(l,U.current??f),M.current=void 0,Pe()}),B=ot(l=>{if(s)return;yt()||l.preventDefault();const n=l.changedTouches[0];n!=null&&(M.current=n.identifier);const f=He(l,M);if(f!==!1){const{newValue:k,activeIndex:v}=be({finger:f});Oe({sliderRef:R,activeIndex:v,setActive:A}),T(k),P&&!Ve(k,y)&&P(l,k,v)}S.current=0;const w=Ke(R.current);w.addEventListener("touchmove",fe,{passive:!0}),w.addEventListener("touchend",se,{passive:!0})}),Pe=g.useCallback(()=>{const l=Ke(R.current);l.removeEventListener("mousemove",fe),l.removeEventListener("mouseup",se),l.removeEventListener("touchmove",fe),l.removeEventListener("touchend",se)},[se,fe]);g.useEffect(()=>{const{current:l}=R;return l.addEventListener("touchstart",B,{passive:yt()}),()=>{l.removeEventListener("touchstart",B),Pe()}},[Pe,B]),g.useEffect(()=>{s&&Pe()},[s,Pe]);const Qe=l=>n=>{if(l.onMouseDown?.(n),s||n.defaultPrevented||n.button!==0)return;n.preventDefault();const f=He(n,M);if(f!==!1){const{newValue:k,activeIndex:v}=be({finger:f});Oe({sliderRef:R,activeIndex:v,setActive:A}),T(k),P&&!Ve(k,y)&&P(n,k,v)}S.current=0;const w=Ke(R.current);w.addEventListener("mousemove",fe,{passive:!0}),w.addEventListener("mouseup",se)},Ie=Ge(Y?L[0]:p,p,d),Z=Ge(L[L.length-1],p,d)-Ie,Le=(l={})=>{const n=rt(l),f={onMouseDown:Qe(n||{})},w={...n,...f};return{...l,ref:Q,...w}},ze=l=>n=>{l.onMouseOver?.(n);const f=Number(n.currentTarget.getAttribute("data-index"));J(f)},Ne=l=>n=>{l.onMouseLeave?.(n),J(-1)},Fe=(l={})=>{const n=rt(l),f={onMouseOver:ze(n||{}),onMouseLeave:Ne(n||{})};return{...l,...n,...f}},Be=l=>({pointerEvents:W!==-1&&W!==l?"none":void 0});let Re;return u==="vertical"&&(Re=h?"vertical-rl":"vertical-lr"),{active:W,axis:he,axisProps:Wa,dragging:c,focusedThumbIndex:ae,getHiddenInputProps:(l={})=>{const n=rt(l),f={onChange:_e(n||{}),onFocus:Ce(n||{}),onBlur:je(n||{}),onKeyDown:q(n||{})},w={...n,...f};return{tabIndex:E,"aria-labelledby":t,"aria-orientation":u,"aria-valuemax":$(d),"aria-valuemin":$(p),name:i,type:"range",min:e.min,max:e.max,step:e.step===null&&e.marks?"any":e.step??void 0,disabled:s,...l,...w,style:{...Ia,direction:h?"rtl":"ltr",width:"100%",height:"100%",writingMode:Re}}},getRootProps:Le,getThumbProps:Fe,marks:pe,open:G,range:Y,rootRef:Q,trackLeap:Z,trackOffset:Ie,values:L,getThumbStyle:Be}}const Va=e=>!e||!Ye(e);function Ua(e){return Se("MuiSlider",e)}const le=ke("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]),Ka=e=>{const{open:t}=e;return{offset:re(t&&le.valueLabelOpen),circle:le.valueLabelCircle,label:le.valueLabelLabel}};function Ya(e){const{children:t,className:o,value:s}=e,r=Ka(e);return t?g.cloneElement(t,{className:t.props.className},a.jsxs(g.Fragment,{children:[t.props.children,a.jsx("span",{className:re(r.offset,o),"aria-hidden":!0,children:a.jsx("span",{className:r.circle,children:a.jsx("span",{className:r.label,children:s})})})]})):null}function vt(e){return e}const qa=N("span",{name:"MuiSlider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[`color${z(o.color)}`],o.size!=="medium"&&t[`size${z(o.size)}`],o.marked&&t.marked,o.orientation==="vertical"&&t.vertical,o.track==="inverted"&&t.trackInverted,o.track===!1&&t.trackFalse]}})(te(({theme:e})=>({borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",WebkitTapHighlightColor:"transparent","@media print":{colorAdjust:"exact"},[`&.${le.disabled}`]:{pointerEvents:"none",cursor:"default",color:(e.vars||e).palette.grey[400]},[`&.${le.dragging}`]:{[`& .${le.thumb}, & .${le.track}`]:{transition:"none"}},variants:[...Object.entries(e.palette).filter(Je()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),{props:{orientation:"horizontal"},style:{height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}}},{props:{orientation:"horizontal",size:"small"},style:{height:2}},{props:{orientation:"horizontal",marked:!0},style:{marginBottom:20}},{props:{orientation:"vertical"},style:{height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}}},{props:{orientation:"vertical",size:"small"},style:{width:2}},{props:{orientation:"vertical",marked:!0},style:{marginRight:44}}]}))),Xa=N("span",{name:"MuiSlider",slot:"Rail"})({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38,variants:[{props:{orientation:"horizontal"},style:{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:"inverted"},style:{opacity:1}}]}),Ga=N("span",{name:"MuiSlider",slot:"Track"})(te(({theme:e})=>({display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:e.transitions.create(["left","width","bottom","height"],{duration:e.transitions.duration.shortest}),variants:[{props:{size:"small"},style:{border:"none"}},{props:{orientation:"horizontal"},style:{height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:!1},style:{display:"none"}},...Object.entries(e.palette).filter(Je()).map(([t])=>({props:{color:t,track:"inverted"},style:{...e.vars?{backgroundColor:e.vars.palette.Slider[`${t}Track`],borderColor:e.vars.palette.Slider[`${t}Track`]}:{backgroundColor:e.lighten(e.palette[t].main,.62),borderColor:e.lighten(e.palette[t].main,.62),...e.applyStyles("dark",{backgroundColor:e.darken(e.palette[t].main,.5)}),...e.applyStyles("dark",{borderColor:e.darken(e.palette[t].main,.5)})}}}))]}))),Ja=N("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.thumb,t[`thumbColor${z(o.color)}`],o.size!=="medium"&&t[`thumbSize${z(o.size)}`]]}})(te(({theme:e})=>({position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:e.transitions.create(["box-shadow","left","bottom"],{duration:e.transitions.duration.shortest}),"&::before":{position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(e.vars||e).shadows[2]},"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&.${le.disabled}`]:{"&:hover":{boxShadow:"none"}},variants:[{props:{size:"small"},style:{width:12,height:12,"&::before":{boxShadow:"none"}}},{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-50%, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 50%)"}},...Object.entries(e.palette).filter(Je()).map(([t])=>({props:{color:t},style:{[`&:hover, &.${le.focusVisible}`]:{boxShadow:`0px 0px 0px 8px ${e.alpha((e.vars||e).palette[t].main,.16)}`,"@media (hover: none)":{boxShadow:"none"}},[`&.${le.active}`]:{boxShadow:`0px 0px 0px 14px ${e.alpha((e.vars||e).palette[t].main,.16)}`}}}))]}))),Qa=N(Ya,{name:"MuiSlider",slot:"ValueLabel"})(te(({theme:e})=>({zIndex:1,whiteSpace:"nowrap",...e.typography.body2,fontWeight:500,transition:e.transitions.create(["transform"],{duration:e.transitions.duration.shortest}),position:"absolute",backgroundColor:(e.vars||e).palette.grey[600],borderRadius:2,color:(e.vars||e).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem",variants:[{props:{orientation:"horizontal"},style:{transform:"translateY(-100%) scale(0)",top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"},[`&.${le.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"}}},{props:{orientation:"vertical"},style:{transform:"translateY(-50%) scale(0)",right:"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"},[`&.${le.valueLabelOpen}`]:{transform:"translateY(-50%) scale(1)"}}},{props:{size:"small"},style:{fontSize:e.typography.pxToRem(12),padding:"0.25rem 0.5rem"}},{props:{orientation:"vertical",size:"small"},style:{right:"20px"}}]}))),Za=N("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:e=>Pt(e)&&e!=="markActive",overridesResolver:(e,t)=>{const{markActive:o}=e;return[t.mark,o&&t.markActive]}})(te(({theme:e})=>({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor",variants:[{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-1px, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 1px)"}},{props:{markActive:!0},style:{backgroundColor:(e.vars||e).palette.background.paper,opacity:.8}}]}))),eo=N("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:e=>Pt(e)&&e!=="markLabelActive"})(te(({theme:e})=>({...e.typography.body2,color:(e.vars||e).palette.text.secondary,position:"absolute",whiteSpace:"nowrap",variants:[{props:{orientation:"horizontal"},style:{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}}},{props:{orientation:"vertical"},style:{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}}},{props:{markLabelActive:!0},style:{color:(e.vars||e).palette.text.primary}}]}))),to=e=>{const{disabled:t,dragging:o,marked:s,orientation:r,track:h,classes:b,color:d,size:p}=e,i={root:["root",t&&"disabled",o&&"dragging",s&&"marked",r==="vertical"&&"vertical",h==="inverted"&&"trackInverted",h===!1&&"trackFalse",d&&`color${z(d)}`,p&&`size${z(p)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",t&&"disabled",p&&`thumbSize${z(p)}`,d&&`thumbColor${z(d)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return we(i,Ua,b)},ao=({children:e})=>e,oo=g.forwardRef(function(t,o){const s=Te({props:t,name:"MuiSlider"}),r=Wt(),{"aria-label":h,"aria-valuetext":b,"aria-labelledby":d,component:p="span",components:i={},componentsProps:x={},color:D="primary",classes:u,className:F,disableSwap:$=!1,disabled:j=!1,getAriaLabel:K,getAriaValueText:E,marks:C=!1,max:M=100,min:W=0,name:A,onChange:G,onChangeCommitted:J,orientation:c="horizontal",shiftStep:m=10,size:S="medium",step:U=1,scale:y=vt,slotProps:T,slots:P,tabIndex:Y,track:L="normal",value:pe,valueLabelDisplay:_="off",valueLabelFormat:ae=vt,...ie}=s,R={...s,isRtl:r,max:M,min:W,classes:u,disabled:j,disableSwap:$,orientation:c,marks:C,color:D,size:S,step:U,shiftStep:m,scale:y,track:L,valueLabelDisplay:_,valueLabelFormat:ae},{axisProps:Q,getRootProps:Ce,getHiddenInputProps:je,getThumbProps:I,open:q,active:_e,axis:me,focusedThumbIndex:he,range:be,dragging:fe,marks:se,values:B,trackOffset:Pe,trackLeap:Qe,getThumbStyle:Ie}=Oa({...R,rootRef:o});R.marked=se.length>0&&se.some(H=>H.label),R.dragging=fe,R.focusedThumbIndex=he;const Z=to(R),Le=P?.root??i.Root??qa,ze=P?.rail??i.Rail??Xa,Ne=P?.track??i.Track??Ga,Fe=P?.thumb??i.Thumb??Ja,Be=P?.valueLabel??i.ValueLabel??Qa,Re=P?.mark??i.Mark??Za,Ee=P?.markLabel??i.MarkLabel??eo,l=P?.input??i.Input??"input",n=T?.root??x.root,f=T?.rail??x.rail,w=T?.track??x.track,k=T?.thumb??x.thumb,v=T?.valueLabel??x.valueLabel,oe=T?.mark??x.mark,ne=T?.markLabel??x.markLabel,V=T?.input??x.input,ue=ye({elementType:Le,getSlotProps:Ce,externalSlotProps:n,externalForwardedProps:ie,additionalProps:{...Va(Le)&&{as:p}},ownerState:{...R,...n?.ownerState},className:[Z.root,F]}),Ae=ye({elementType:ze,externalSlotProps:f,ownerState:R,className:Z.rail}),Mt=ye({elementType:Ne,externalSlotProps:w,additionalProps:{style:{...Q[me].offset(Pe),...Q[me].leap(Qe)}},ownerState:{...R,...w?.ownerState},className:Z.track}),Ze=ye({elementType:Fe,getSlotProps:I,externalSlotProps:k,ownerState:{...R,...k?.ownerState},className:Z.thumb}),Lt=ye({elementType:Be,externalSlotProps:v,ownerState:{...R,...v?.ownerState},className:Z.valueLabel}),et=ye({elementType:Re,externalSlotProps:oe,ownerState:R,className:Z.mark}),tt=ye({elementType:Ee,externalSlotProps:ne,ownerState:R,className:Z.markLabel}),At=ye({elementType:l,getSlotProps:je,externalSlotProps:V,ownerState:R});return a.jsxs(Le,{...ue,children:[a.jsx(ze,{...Ae}),a.jsx(Ne,{...Mt}),se.filter(H=>H.value>=W&&H.value<=M).map((H,X)=>{const at=Ge(H.value,W,M),We=Q[me].offset(at);let ge;return L===!1?ge=B.includes(H.value):ge=L==="normal"&&(be?H.value>=B[0]&&H.value<=B[B.length-1]:H.value<=B[0])||L==="inverted"&&(be?H.value<=B[0]||H.value>=B[B.length-1]:H.value>=B[0]),a.jsxs(g.Fragment,{children:[a.jsx(Re,{"data-index":X,...et,...!Ye(Re)&&{markActive:ge},style:{...We,...et.style},className:re(et.className,ge&&Z.markActive)}),H.label!=null?a.jsx(Ee,{"aria-hidden":!0,"data-index":X,...tt,...!Ye(Ee)&&{markLabelActive:ge},style:{...We,...tt.style},className:re(Z.markLabel,tt.className,ge&&Z.markLabelActive),children:H.label}):null]},X)}),B.map((H,X)=>{const at=Ge(H,W,M),We=Q[me].offset(at),ge=_==="off"?ao:Be;return a.jsx(ge,{...!Ye(ge)&&{valueLabelFormat:ae,valueLabelDisplay:_,value:typeof ae=="function"?ae(y(H),X):ae,index:X,open:q===X||_e===X||_==="on",disabled:j},...Lt,children:a.jsx(Fe,{"data-index":X,...Ze,className:re(Z.thumb,Ze.className,_e===X&&Z.active,he===X&&Z.focusVisible),style:{...We,...Ie(X),...Ze.style},children:a.jsx(l,{"data-index":X,"aria-label":K?K(X):h,"aria-valuenow":y(H),"aria-labelledby":d,"aria-valuetext":E?E(y(H),X):b,value:B[X],...At})})},X)})]})});function ro(e){return Se("MuiSwitch",e)}const ee=ke("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),so=e=>{const{classes:t,edge:o,size:s,color:r,checked:h,disabled:b}=e,d={root:["root",o&&`edge${z(o)}`,`size${z(s)}`],switchBase:["switchBase",`color${z(r)}`,h&&"checked",b&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},p=we(d,ro,t);return{...t,...p}},no=N("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.edge&&t[`edge${z(o.edge)}`],t[`size${z(o.size)}`]]}})({display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${ee.thumb}`]:{width:16,height:16},[`& .${ee.switchBase}`]:{padding:4,[`&.${ee.checked}`]:{transform:"translateX(16px)"}}}}]}),lo=N(ca,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.switchBase,{[`& .${ee.input}`]:t.input},o.color!=="default"&&t[`color${z(o.color)}`]]}})(te(({theme:e})=>({position:"absolute",top:0,left:0,zIndex:1,color:e.vars?e.vars.palette.Switch.defaultColor:`${e.palette.mode==="light"?e.palette.common.white:e.palette.grey[300]}`,transition:e.transitions.create(["left","transform"],{duration:e.transitions.duration.shortest}),[`&.${ee.checked}`]:{transform:"translateX(20px)"},[`&.${ee.disabled}`]:{color:e.vars?e.vars.palette.Switch.defaultDisabledColor:`${e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[600]}`},[`&.${ee.checked} + .${ee.track}`]:{opacity:.5},[`&.${ee.disabled} + .${ee.track}`]:{opacity:e.vars?e.vars.opacity.switchTrackDisabled:`${e.palette.mode==="light"?.12:.2}`},[`& .${ee.input}`]:{left:"-100%",width:"300%"}})),te(({theme:e})=>({"&:hover":{backgroundColor:e.alpha((e.vars||e).palette.action.active,(e.vars||e).palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(e.palette).filter(Je(["light"])).map(([t])=>({props:{color:t},style:{[`&.${ee.checked}`]:{color:(e.vars||e).palette[t].main,"&:hover":{backgroundColor:e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${ee.disabled}`]:{color:e.vars?e.vars.palette.Switch[`${t}DisabledColor`]:`${e.palette.mode==="light"?e.lighten(e.palette[t].main,.62):e.darken(e.palette[t].main,.55)}`}},[`&.${ee.checked} + .${ee.track}`]:{backgroundColor:(e.vars||e).palette[t].main}}}))]}))),io=N("span",{name:"MuiSwitch",slot:"Track"})(te(({theme:e})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:e.transitions.create(["opacity","background-color"],{duration:e.transitions.duration.shortest}),backgroundColor:e.vars?e.vars.palette.common.onBackground:`${e.palette.mode==="light"?e.palette.common.black:e.palette.common.white}`,opacity:e.vars?e.vars.opacity.switchTrack:`${e.palette.mode==="light"?.38:.3}`}))),co=N("span",{name:"MuiSwitch",slot:"Thumb"})(te(({theme:e})=>({boxShadow:(e.vars||e).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}))),uo=g.forwardRef(function(t,o){const s=Te({props:t,name:"MuiSwitch"}),{className:r,color:h="primary",edge:b=!1,size:d="medium",sx:p,slots:i={},slotProps:x={},...D}=s,u={...s,color:h,edge:b,size:d},F=so(u),$={slots:i,slotProps:x},[j,K]=de("root",{className:re(F.root,r),elementType:no,externalForwardedProps:$,ownerState:u,additionalProps:{sx:p}}),[E,C]=de("thumb",{className:F.thumb,elementType:co,externalForwardedProps:$,ownerState:u}),M=a.jsx(E,{...C}),[W,A]=de("track",{className:F.track,elementType:io,externalForwardedProps:$,ownerState:u});return a.jsxs(j,{...K,children:[a.jsx(lo,{type:"checkbox",icon:M,checkedIcon:M,ref:o,ownerState:u,...D,classes:{...F,root:F.switchBase},slots:{...i.switchBase&&{root:i.switchBase},...i.input&&{input:i.input}},slotProps:{...x.switchBase&&{root:typeof x.switchBase=="function"?x.switchBase(u):x.switchBase},input:{role:"switch"},...x.input&&{input:typeof x.input=="function"?x.input(u):x.input}}}),a.jsx(W,{...A})]})}),po=Tt.memo(({attributes:e,sharedAttributes:t,deviceId:o,entityType:s})=>{const{t:r}=ct(),h=e,b=t,d=h?.relays||"[]",p=c=>{if(!c)return[];try{const m=JSON.parse(c);if(Array.isArray(m)&&m.length>0)return m}catch(m){console.error("Failed to parse relays:",m)}return[]},[i,x]=g.useState(()=>p(d)),[D]=g.useState(["Manual","Auto","Timer","Schedule"]),[u,F]=g.useState(0),[$,j]=g.useState(!1),[K,E]=g.useState(!0),[C,M]=g.useState({});g.useEffect(()=>{const c=p(d);x(c)},[d]),g.useEffect(()=>{if($){const c=p(b?.relays);c.length>u?M({...c[u]}):M({...i[u]})}},[$,u,i,b?.relays]);const W=c=>{const m=c.target.checked,S=i[u],U=[...i];if(U[u].state=m,x(U),o){const y={pin:S.pin,state:m};nt(o,"setRelayState",y)}},A=c=>{const{name:m,value:S,type:U}=c.target;let y=S;U==="number"?(y=parseInt(S,10),isNaN(y)&&(y=0)):m==="datetime"&&(y=new Date(S).getTime()/1e3),M(T=>({...T,[m]:y})),E(!1)},G=(c,m)=>{const{name:S,value:U}=m.target,y=[...C.timers||[]];y[c]={...y[c],[S]:parseInt(U)},M(T=>({...T,timers:y})),E(!1)},J=async()=>{if(!o||!s)return;const c=[...i];c[u]={...c[u],...C},x(c),E(!0),lt.promise(Ot(s,o,"SHARED_SCOPE",{relays:c}),{pending:r("device.genericConfig.saving"),success:r("device.genericConfig.saveSuccess"),error:r("device.genericConfig.saveError")}).then(()=>{lt.promise(nt(o,"stateSave",{}),{pending:"Saving state...",success:"State saved!",error:"Failed to save state"})}).then(()=>{lt.promise(nt(o,"syncAttribute",{}),{pending:"Syncing attributes...",success:"Attributes synced!",error:"Failed to sync attributes"})}),j(!1)};return a.jsx(qe,{children:a.jsxs(Xe,{children:[a.jsx(O,{variant:"h6",gutterBottom:!0,children:r("relays_controller")}),a.jsx(ve,{sx:{display:"flex",flexWrap:"wrap",gap:2},children:i.map((c,m)=>a.jsxs(ve,{sx:{flex:"1 1 calc(50% - 1rem)","@media (min-width:600px)":{flex:"1 1 calc(33.333% - 1rem)"},"@media (min-width:900px)":{flex:"1 1 calc(25% - 1rem)"}},children:[a.jsx(qe,{onClick:()=>F(m),sx:{textAlign:"center",borderColor:c.state?"success.main":"error.main",borderWidth:1,borderStyle:"solid",bgcolor:c.state?"success.light":"error.light",cursor:"pointer"},children:a.jsxs(Xe,{children:[a.jsx(O,{variant:"h6",children:`${m+1}`}),a.jsx(O,{variant:"caption",children:a.jsx("strong",{children:c.label.length>20?`${c.label.substring(0,20)}...`:c.label})}),a.jsxs(O,{variant:"caption",children:[a.jsx("br",{}),a.jsxs("strong",{children:["(",r(c.state?"relay_state_on":"relay_state_off"),")"]})]})]})}),a.jsx(O,{variant:"body2",sx:{textAlign:"center"},children:c.mode===0?r("relay_mode_manual"):r("relay_mode_auto")})]},m))}),a.jsx(ft,{sx:{my:2}}),a.jsxs(xe,{direction:"row",spacing:1,alignItems:"center",children:[a.jsxs(pt,{fullWidth:!0,variant:"outlined",size:"small",children:[a.jsx(mt,{id:"relay-select-label",children:r("select_relay_to_control")}),a.jsx(ht,{labelId:"relay-select-label",value:u,label:r("select_relay_to_control"),onChange:c=>F(Number(c.target.value)),children:i.map((c,m)=>a.jsx(bt,{value:m,children:`Relay ${c.pin+1} - ${c.label==="No label"?r("relay_label_no_label"):c.label}`},c.pin))})]}),a.jsx(st,{startIcon:a.jsx(Ht,{}),variant:"outlined",size:"small",onClick:()=>j(!0),children:r("relay_adjust_button")})]}),a.jsx(ft,{sx:{my:2}}),a.jsxs(ve,{children:[a.jsx($a,{control:a.jsx(uo,{checked:i[u]?.state||!1,onChange:W,disabled:i[u]?.mode!==0}),label:r("relay_status",{status:i[u]?.state?r("relay_state_on"):r("relay_state_off")})}),a.jsxs(ve,{children:[a.jsx(O,{variant:"body2",dangerouslySetInnerHTML:{__html:r("relay_operated_by",{mode:D[i[u]?.mode]||D[0]})}}),i[u]?.mode===0&&i[u]?.autoOff>0&&a.jsx(O,{variant:"body2",dangerouslySetInnerHTML:{__html:r("relay_auto_off",{seconds:i[u].autoOff})}}),i[u]?.mode===1&&a.jsx(O,{variant:"body2",dangerouslySetInnerHTML:{__html:r("relay_duty_cycle",{dutyCycle:i[u].dutyCycle,seconds:i[u].dutyRange})}}),i[u]?.mode===2&&i[u].timers.map((c,m)=>c.d>0&&a.jsx(O,{variant:"body2",dangerouslySetInnerHTML:{__html:r("relay_timer_operation",{index:m+1,h:c.h,i:c.i,s:c.s,d:c.d})}},m)),i[u]?.mode===3&&a.jsx(O,{variant:"body2",dangerouslySetInnerHTML:{__html:r("relay_specific_datetime",{datetime:i[u].datetime?new Date(i[u].datetime*1e3).toISOString().slice(0,16):"",duration:i[u].duration})}})]})]}),a.jsxs(fa,{open:$,onClose:()=>j(!1),fullWidth:!0,maxWidth:"sm",children:[a.jsx(Ra,{children:r("adjust_relay_title",{index:u+1,label:i[u]?.label})}),a.jsx(Pa,{children:a.jsxs(xe,{spacing:2,sx:{mt:1},children:[a.jsx(ce,{label:r("relay_label_label"),name:"label",value:C.label||"",onChange:A,fullWidth:!0,size:"small",helperText:r("relay_label_helper",{index:u+1})}),a.jsx(ce,{label:r("overrun_threshold_label"),name:"overrunInSec",type:"number",value:C.overrunInSec||"",onChange:A,fullWidth:!0,size:"small",helperText:r("overrun_threshold_helper")}),a.jsx(ce,{label:r("wattage_label"),name:"wattage",type:"number",value:C.wattage||"",onChange:A,fullWidth:!0,size:"small",helperText:r("wattage_helper")}),a.jsxs(pt,{fullWidth:!0,size:"small",children:[a.jsx(mt,{children:r("select_relay_mode")}),a.jsx(ht,{name:"mode",value:C.mode??0,onChange:c=>{M(m=>({...m,mode:Number(c.target.value)})),E(!1)},label:r("select_relay_mode"),children:D.map((c,m)=>a.jsx(bt,{value:m,children:c},m))})]}),C.mode===0&&a.jsx(ce,{label:r("auto_off_label"),name:"autoOff",type:"number",value:C.autoOff||"",onChange:A,fullWidth:!0,size:"small",helperText:r("auto_off_helper")}),C.mode===1&&a.jsxs(xe,{spacing:2,children:[a.jsx(O,{gutterBottom:!0,children:r("duty_cycle_label",{dutyCycle:C.dutyCycle})}),a.jsx(oo,{name:"dutyCycle",value:C.dutyCycle||0,onChange:(c,m)=>{M(S=>({...S,dutyCycle:m})),E(!1)},valueLabelDisplay:"auto",step:1,marks:!0,min:0,max:100}),a.jsx(ce,{label:r("duty_range_label"),name:"dutyRange",type:"number",value:C.dutyRange||"",onChange:A,fullWidth:!0,size:"small",helperText:r("duty_range_helper")})]}),C.mode===2&&a.jsxs(xe,{spacing:2,children:[a.jsx(O,{children:r("timer_configuration_label")}),a.jsx(O,{variant:"caption",children:r("timer_configuration_helper")}),(C.timers||[]).map((c,m)=>a.jsxs(xe,{direction:"row",spacing:1,children:[a.jsx(ce,{name:"h",type:"number",value:c.h,placeholder:r("hour_placeholder"),onChange:S=>G(m,S),size:"small"}),a.jsx(ce,{name:"i",type:"number",value:c.i,placeholder:r("minute_placeholder"),onChange:S=>G(m,S),size:"small"}),a.jsx(ce,{name:"s",type:"number",value:c.s,placeholder:r("second_placeholder"),onChange:S=>G(m,S),size:"small"}),a.jsx(ce,{name:"d",type:"number",value:c.d,placeholder:r("duration_placeholder"),onChange:S=>G(m,S),size:"small"})]},m))]}),C.mode===3&&a.jsxs(xe,{spacing:2,children:[a.jsx(ce,{type:"datetime-local",name:"datetime",value:C.datetime?new Date(C.datetime*1e3).toISOString().slice(0,16):"",onChange:A,fullWidth:!0,size:"small",helperText:r("datetime_helper")}),a.jsx(ce,{label:r("duration_label"),name:"duration",type:"number",value:C.duration||"",onChange:A,fullWidth:!0,size:"small",helperText:r("duration_helper")})]})]})}),a.jsxs(va,{children:[a.jsx(st,{onClick:()=>j(!1),children:r("cancel")}),a.jsx(st,{onClick:J,variant:"contained",disabled:K,children:r("save_button")})]})]})]})})}),St=720,mo=Tt.memo(({attributes:e})=>{const{t}=ct(),[o,s]=g.useState([]),r=Ct(),h=Vt(r.breakpoints.down("sm"));g.useEffect(()=>{if(e){const i=Number(e._amp||0),x=Number(e._volt||0),D=Number(e._watt||0),u=Number(e._pf||0),F={name:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}),_amp:i,_volt:x,_watt:D,_pf:u};s($=>{if($.length>0&&$[$.length-1].name===F.name)return $;const j=[...$,F];return j.length>St?j.slice(j.length-St):j})}},[e]);const b=(i,x)=>{const D=e?.[i];if(D==null)return"N/A";const u=Number(D);return isNaN(u)?"N/A":x!==void 0?u.toFixed(x):String(Math.round(u))},d=(i,x,D)=>a.jsxs(ve,{sx:{textAlign:"center",flex:"1 1 calc(50% - 1rem)","@media (min-width:600px)":{flex:"1 1 calc(33.333% - 1rem)"},"@media (min-width:900px)":{flex:"1 1 calc(16.666% - 1rem)"},p:1},children:[a.jsx(O,{variant:"subtitle1",children:i}),a.jsxs(O,{variant:"h5",children:[x," ",D]})]}),p=[{dataKey:"_amp",label:t("gadadarMonitor._amp"),color:"#8884d8"},{dataKey:"_volt",label:t("gadadarMonitor._volt"),color:"#82ca9d"},{dataKey:"_watt",label:t("gadadarMonitor._watt"),color:"#ffc658"},{dataKey:"_pf",label:t("gadadarMonitor._pf"),color:"#ff7300"}];return a.jsxs(xe,{spacing:2,children:[a.jsx(qe,{children:a.jsxs(Xe,{children:[a.jsx(O,{variant:"h6",gutterBottom:!0,children:t("gadadarMonitor.title")}),a.jsxs(ve,{sx:{display:"flex",flexWrap:"wrap",gap:2},children:[d(t("gadadarMonitor._amp"),b("_amp",2),"A"),d(t("gadadarMonitor._volt"),b("_volt",0),"V"),d(t("gadadarMonitor._watt"),b("_watt",0),"W"),d(t("gadadarMonitor._ener"),b("_ener",2),"kWh"),d(t("gadadarMonitor._freq"),b("_freq",1),"Hz"),d(t("gadadarMonitor._pf"),b("_pf",2),"")]})]})}),a.jsx(ve,{sx:{display:"flex",flexWrap:"wrap",gap:2},children:p.map(i=>a.jsx(ve,{sx:{flex:"1 1 100%","@media (min-width:900px)":{flex:"1 1 calc(50% - 1rem)"}},children:a.jsx(qe,{children:a.jsxs(Xe,{children:[a.jsx(O,{variant:"subtitle1",align:"center",children:i.label}),a.jsx(Kt,{width:"100%",height:h?200:300,children:a.jsxs(Yt,{data:o,margin:{top:5,right:30,left:0,bottom:5},children:[a.jsx(qt,{strokeDasharray:"3 3"}),a.jsx(Xt,{dataKey:"name",interval:"preserveStartEnd",tick:{fontSize:12}}),a.jsx(Gt,{tick:{fontSize:12}}),a.jsx(Jt,{}),a.jsx(Qt,{}),a.jsx(Zt,{type:"monotone",dataKey:i.dataKey,name:i.label,stroke:i.color,dot:!1,isAnimationActive:!1})]})})]})})},i.dataKey))})]})}),fo=()=>{const{t:e}=ct(),{device:t}=Ut(),o=[{label:e("device.dashboardTabs.monitor"),content:a.jsxs(xe,{spacing:2,children:[a.jsx(ea,{}),a.jsx(mo,{attributes:t?.attributesClientScope})]})},{label:e("device.dashboardTabs.control"),content:a.jsx(po,{attributes:t?.attributesClientScope,sharedAttributes:t?.attributesSharedScope,deviceId:t?.id.id,entityType:t?.id.entityType})},{label:e("device.dashboardTabs.analytic"),content:t?a.jsx(ta,{deviceId:t.id.id,entityType:t.id.entityType}):null},{label:e("device.dashboardTabs.config"),content:a.jsxs(xe,{spacing:2,children:[a.jsx(aa,{attributes:t?.attributesClientScope,deviceId:t?.id.id,entityType:t?.id.entityType}),a.jsx(oa,{})]})}];return a.jsx(ra,{tabs:o})};export{fo as default};
