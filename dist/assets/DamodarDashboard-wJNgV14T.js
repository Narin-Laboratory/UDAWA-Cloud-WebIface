import{R as v,H as j,r as p,i as M,W as C,j as e,T as c,I as l,X as S}from"./index-CIZpIcYM.js";import{S as A,C as u,a as f,R as w,L as D,b as N,X as K,Y as k,T as E,c as L,d as R,e as I,f as X,g as z}from"./TimeseriesVisualizer-CPEKX3dO.js";const b=720,W=v.memo(({attributes:s})=>{const{t}=j(),[m,g]=p.useState([]),y=M(),_=C(y.breakpoints.down("sm"));p.useEffect(()=>{if(s){const a=Number(s._temp||0),n=Number(s._tds||0),i=Number(s._ec||0),r={name:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}),_temp:a,_tds:n,_ec:i};g(o=>{if(o.length>0&&o[o.length-1].name===r.name)return o;const d=[...o,r];return d.length>b?d.slice(d.length-b):d})}},[s]);const x=(a,n)=>{const i=s?.[a];if(i==null)return"N/A";const r=Number(i);return isNaN(r)?"N/A":n!==void 0?r.toFixed(n):String(Math.round(r))},h=(a,n,i)=>e.jsxs(l,{sx:{textAlign:"center",flex:"1 1 calc(50% - 1rem)","@media (min-width:600px)":{flex:"1 1 calc(33.333% - 1rem)"},"@media (min-width:900px)":{flex:"1 1 calc(16.666% - 1rem)"},p:1},children:[e.jsx(c,{variant:"subtitle1",children:a}),e.jsxs(c,{variant:"h5",children:[n," ",i]})]}),T=[{dataKey:"_temp",label:t("damodarMonitor._temp"),color:"#8884d8"},{dataKey:"_tds",label:t("damodarMonitor._tds"),color:"#82ca9d"},{dataKey:"_ec",label:t("damodarMonitor._ec"),color:"#ffc658"}];return e.jsxs(A,{spacing:2,children:[e.jsx(u,{children:e.jsxs(f,{children:[e.jsx(c,{variant:"h6",gutterBottom:!0,children:t("damodarMonitor.title")}),e.jsxs(l,{sx:{display:"flex",flexWrap:"wrap",gap:2},children:[h(t("damodarMonitor._temp"),x("_temp",2),"°C"),h(t("damodarMonitor._tds"),x("_tds",0),"ppm"),h(t("damodarMonitor._ec"),x("_ec",2),"µS/cm")]})]})}),e.jsx(l,{sx:{display:"flex",flexWrap:"wrap",gap:2},children:T.map(a=>e.jsx(l,{sx:{flex:"1 1 100%","@media (min-width:900px)":{flex:"1 1 calc(50% - 1rem)"}},children:e.jsx(u,{children:e.jsxs(f,{children:[e.jsx(c,{variant:"subtitle1",align:"center",children:a.label}),e.jsx(w,{width:"100%",height:_?200:300,children:e.jsxs(D,{data:m,margin:{top:5,right:30,left:0,bottom:5},children:[e.jsx(N,{strokeDasharray:"3 3"}),e.jsx(K,{dataKey:"name",interval:"preserveStartEnd",tick:{fontSize:12}}),e.jsx(k,{tick:{fontSize:12}}),e.jsx(E,{}),e.jsx(L,{}),e.jsx(R,{type:"monotone",dataKey:a.dataKey,name:a.label,stroke:a.color,dot:!1,isAnimationActive:!1})]})})]})})},a.dataKey))})]})}),Y=()=>{const{t:s}=j(),{device:t}=S(),m=[{label:s("device.dashboardTabs.monitor"),content:e.jsx(W,{attributes:t?.attributesClientScope})},{label:s("device.dashboardTabs.analytic"),content:t?e.jsx(I,{deviceId:t.id.id,entityType:t.id.entityType}):null},{label:s("device.dashboardTabs.config"),content:e.jsx(X,{attributes:t?.attributesClientScope,deviceId:t?.id.id,entityType:t?.id.entityType})}];return e.jsx(z,{tabs:m})};export{Y as default};
