import{R as M,G as b,r as h,i as A,W as C,j as e,T as c,H as d,X as S}from"./index-Cmfn1Ysx.js";import{S as g,A as w,C as p,a as j,R as N,L as D,b as K,X as k,Y as E,T as L,c as R,d as X,e as z,f as G,g as I,h as W}from"./DeviceOperation-CV2OZbEu.js";const f=720,B=M.memo(({attributes:i})=>{const{t}=b(),[x,y]=h.useState([]),_=A(),v=C(_.breakpoints.down("sm"));h.useEffect(()=>{if(i){const a=Number(i._temp||0),r=Number(i._rh||0),s=Number(i._lux||0),n={name:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}),_temp:a,_rh:r,_lux:s};y(o=>{if(o.length>0&&o[o.length-1].name===n.name)return o;const l=[...o,n];return l.length>f?l.slice(l.length-f):l})}},[i]);const m=(a,r)=>{const s=i?.[a];if(s==null)return"N/A";const n=Number(s);return isNaN(n)?"N/A":r!==void 0?n.toFixed(r):String(Math.round(n))},u=(a,r,s)=>e.jsxs(d,{sx:{textAlign:"center",flex:"1 1 calc(50% - 1rem)","@media (min-width:600px)":{flex:"1 1 calc(33.333% - 1rem)"},"@media (min-width:900px)":{flex:"1 1 calc(16.666% - 1rem)"},p:1},children:[e.jsx(c,{variant:"subtitle1",children:a}),e.jsxs(c,{variant:"h5",children:[r," ",s]})]}),T=[{dataKey:"_temp",label:t("murariMonitor._temp"),color:"#8884d8"},{dataKey:"_rh",label:t("murariMonitor._rh"),color:"#82ca9d"},{dataKey:"_lux",label:t("murariMonitor._lux"),color:"#ffc658"}];return e.jsxs(g,{spacing:2,children:[e.jsx(w,{}),e.jsx(p,{children:e.jsxs(j,{children:[e.jsx(c,{variant:"h6",gutterBottom:!0,children:t("murariMonitor.title")}),e.jsxs(d,{sx:{display:"flex",flexWrap:"wrap",gap:2},children:[u(t("murariMonitor._temp"),m("_temp",2),"Â°C"),u(t("murariMonitor._rh"),m("_rh",0),"%"),u(t("murariMonitor._lux"),m("_lux",0),"lx")]})]})}),e.jsx(d,{sx:{display:"flex",flexWrap:"wrap",gap:2},children:T.map(a=>e.jsx(d,{sx:{flex:"1 1 100%","@media (min-width:900px)":{flex:"1 1 calc(50% - 1rem)"}},children:e.jsx(p,{children:e.jsxs(j,{children:[e.jsx(c,{variant:"subtitle1",align:"center",children:a.label}),e.jsx(N,{width:"100%",height:v?200:300,children:e.jsxs(D,{data:x,margin:{top:5,right:30,left:0,bottom:5},children:[e.jsx(K,{strokeDasharray:"3 3"}),e.jsx(k,{dataKey:"name",interval:"preserveStartEnd",tick:{fontSize:12}}),e.jsx(E,{tick:{fontSize:12}}),e.jsx(L,{}),e.jsx(R,{}),e.jsx(X,{type:"monotone",dataKey:a.dataKey,name:a.label,stroke:a.color,dot:!1,isAnimationActive:!1})]})})]})})},a.dataKey))})]})}),H=()=>{const{t:i}=b(),{device:t}=S(),x=[{label:i("device.dashboardTabs.monitor"),content:e.jsx(B,{attributes:t?.attributesClientScope})},{label:i("device.dashboardTabs.analytic"),content:t?e.jsx(z,{deviceId:t.id.id,entityType:t.id.entityType}):null},{label:i("device.dashboardTabs.config"),content:e.jsxs(g,{spacing:2,children:[e.jsx(G,{attributes:t?.attributesClientScope,deviceId:t?.id.id,entityType:t?.id.entityType}),e.jsx(I,{})]})}];return e.jsx(W,{tabs:x})};export{H as default};
